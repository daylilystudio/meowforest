(function(t){function e(e){for(var r,c,l=e[0],i=e[1],n=e[2],d=0,h=[];d<l.length;d++)c=l[d],Object.prototype.hasOwnProperty.call(s,c)&&s[c]&&h.push(s[c][0]),s[c]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r]);p&&p(e);while(h.length)h.shift()();return o.push.apply(o,n||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],r=!0,c=1;c<a.length;c++){var i=a[c];0!==s[i]&&(r=!1)}r&&(o.splice(e--,1),t=l(l.s=a[0]))}return t}var r={},s={app:0},o=[];function c(t){return l.p+"js/"+({about:"about"}[t]||t)+"."+{about:"2472d055"}[t]+".js"}function l(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.e=function(t){var e=[],a=s[t];if(0!==a)if(a)e.push(a[2]);else{var r=new Promise((function(e,r){a=s[t]=[e,r]}));e.push(a[2]=r);var o,i=document.createElement("script");i.charset="utf-8",i.timeout=120,l.nc&&i.setAttribute("nonce",l.nc),i.src=c(t);var n=new Error;o=function(e){i.onerror=i.onload=null,clearTimeout(d);var a=s[t];if(0!==a){if(a){var r=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;n.message="Loading chunk "+t+" failed.\n("+r+": "+o+")",n.name="ChunkLoadError",n.type=r,n.request=o,a[1](n)}s[t]=void 0}};var d=setTimeout((function(){o({type:"timeout",target:i})}),12e4);i.onerror=i.onload=o,document.head.appendChild(i)}return Promise.all(e)},l.m=t,l.c=r,l.d=function(t,e,a){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)l.d(a,r,function(e){return t[e]}.bind(null,r));return a},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="",l.oe=function(t){throw console.error(t),t};var i=window["webpackJsonp"]=window["webpackJsonp"]||[],n=i.push.bind(i);i.push=e,i=i.slice();for(var d=0;d<i.length;d++)e(i[d]);var p=n;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"1bd4":function(t,e,a){t.exports=a.p+"img/icon_phone.0cf23794.svg"},2091:function(t,e,a){t.exports=a.p+"img/visual.3e10adb3.png"},2388:function(t,e,a){"use strict";a("d1e7")},"2e6d":function(t,e,a){t.exports=a.p+"img/research.4cecf52a.png"},"3af5":function(t,e,a){},4244:function(t,e,a){t.exports=a.p+"img/icon_info.981f7471.svg"},"48e7":function(t,e,a){},"4b18":function(t,e,a){t.exports=a.p+"img/icon_search.decbb0bb.svg"},"507e":function(t,e,a){"use strict";a("7875")},"52f3":function(t,e,a){t.exports=a.p+"img/icon_adult.9ff939d7.svg"},"56d7":function(t,e,a){"use strict";a.r(e);var r=a("7a23");function s(t,e){const a=Object(r["A"])("router-view");return Object(r["t"])(),Object(r["e"])(a)}var o=a("6b0d"),c=a.n(o);const l={},i=c()(l,[["render",s]]);var n=i,d=a("6c02"),p=a("df43"),h=a.n(p),u=a("d3e2"),m=a.n(u);const b={class:"home"},f={class:"z-10 flex flex-col py-4 pl-4 md:pt-6 md:pb-0 md:px-6 w-full md:w-80 h-auto md:h-full bg-main-color fixed bottom-0 left-0 shadow md:shadow-pc"},x=Object(r["h"])("img",{src:h.a,class:"transform -rotate-90 md:rotate-0",alt:"collapse side"},null,-1),g=[x],j=Object(r["h"])("label",{for:"checkbox",class:"flex items-center cursor-pointer"},[Object(r["h"])("p",{class:"inline-block w-10 h-6 bg-white rounded-full relative"}),Object(r["h"])("span",{class:"text-xs text-white ml-2"},"只顯示所有標記過★號的藥局")],-1),O={class:"pharmacyContain flex md:flex-col flex-nowrap items-center md:items-stretch overflow-x-auto md:overflow-x-hidden md:overflow-y-auto"},k={class:"h-40 md:h-auto md:w-3/4 block mr-4 md:mr-0 md:mb-4 md:mr-auto md:ml-auto",src:m.a,alt:"no data"};function v(t,e,a,s,o,c){const l=Object(r["A"])("mapFrame"),i=Object(r["A"])("searchFrame"),n=Object(r["A"])("pharmacyCard"),d=Object(r["A"])("researchButton"),p=Object(r["A"])("infoModal");return Object(r["t"])(),Object(r["g"])("div",b,[Object(r["j"])(l,{mapAllData:o.allData,maskCutPoint:o.maskCutPoint},null,8,["mapAllData","maskCutPoint"]),Object(r["j"])(i,{class:"flex md:hidden",searchFrameDevice:"mb",mapData:o.data.features,searchText:o.searchText,"onUpdate:searchText":e[0]||(e[0]=t=>o.searchText=t),onDelSearchText:e[1]||(e[1]=t=>c.onDelSearchText(t)),filterMaskBtn:o.filterMask,"onUpdate:filterMaskBtn":e[2]||(e[2]=t=>o.filterMask=t)},null,8,["mapData","searchText","filterMaskBtn"]),Object(r["h"])("aside",f,[Object(r["h"])("div",{onClick:e[3]||(e[3]=t=>c.collapse()),id:"collapse",class:"absolute translate-x-0 md:translate-x-full top-0 md:top-16 right-12 md:right-0 w-12 h-8 md:w-8 md:h-12 bg-white rounded-br-2xl rounded-bl-2xl md:rounded-bl-none md:rounded-tr-2xl shadow opacity-70 hover:opacity-100 flex justify-center items-center cursor-pointer"},g),Object(r["j"])(i,{class:"hidden md:flex",searchFrameDevice:"pc",mapData:o.data.features,searchText:o.searchText,"onUpdate:searchText":e[4]||(e[4]=t=>o.searchText=t),onDelSearchText:e[5]||(e[5]=t=>c.onDelSearchText(t)),filterMaskBtn:o.filterMask,"onUpdate:filterMaskBtn":e[6]||(e[6]=t=>o.filterMask=t)},null,8,["mapData","searchText","filterMaskBtn"]),Object(r["h"])("div",{onClick:e[8]||(e[8]=(...t)=>c.getStarData&&c.getStarData(...t)),class:"showMaskStar inline-block mb-5 mt-0 md:mt-3"},[Object(r["I"])(Object(r["h"])("input",{"onUpdate:modelValue":e[7]||(e[7]=t=>o.showMaskStar=t),value:"showMaskStar",class:"hidden",type:"checkbox",id:"checkbox"},null,512),[[r["E"],o.showMaskStar]]),j]),Object(r["h"])("article",O,[o.showMaskStar?Object(r["f"])("",!0):(Object(r["t"])(),Object(r["e"])(n,{key:0,listData:c.searchData,maskCutPoint:o.maskCutPoint},null,8,["listData","maskCutPoint"])),o.showMaskStar?(Object(r["t"])(),Object(r["e"])(n,{key:1,listData:c.starDataWithSearch,maskCutPoint:o.maskCutPoint},null,8,["listData","maskCutPoint"])):Object(r["f"])("",!0),Object(r["I"])(Object(r["j"])(d,{onClick:e[9]||(e[9]=t=>c.onDelSearchText("")),class:"hidden md:block",searchFrameDevice:"pc"},null,512),[[r["F"],o.searchText&&c.searchData.length>0]]),Object(r["I"])(Object(r["j"])(d,{onClick:e[10]||(e[10]=t=>c.onDelSearchText("")),class:"inline-block md:hidden flex-none",searchFrameDevice:"mb"},null,512),[[r["F"],o.searchText&&c.searchData.length>0]]),Object(r["I"])(Object(r["h"])("img",k,null,512),[[r["F"],0==c.searchData.length||0==o.starData.length&&o.showMaskStar]])])]),Object(r["j"])(p,{mapData:o.data.features},null,8,["mapData"])])}var y=a("52f3"),w=a.n(y),M=a("d078"),C=a.n(M),S=a("6dd3"),D=a.n(S),T=a("1bd4"),_=a.n(T);const P=t=>(Object(r["w"])("data-v-3d389a57"),t=t(),Object(r["u"])(),t),I=["id"],L={class:"flex justify-between items-center"},F=["data-geo","data-adult","data-child"],N={key:0,class:"text-xs text-gray-tips pr-2"},A={class:"markStar flex items-center"},E=["data-id","id","checked"],B=["for"],U=P(()=>Object(r["h"])("svg",{class:"w-5 h-auto overflow-visible",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[Object(r["h"])("path",{d:"M7.14168 0.556577L5.18879 4.69357L0.819452 5.35911C0.035902 5.47784 -0.278116 6.48709 0.290107 7.06515L3.45122 10.2835L2.70356 14.8298C2.56898 15.6516 3.39739 16.2671 4.09122 15.8828L8 13.7362L11.9088 15.8828C12.6026 16.264 13.431 15.6516 13.2964 14.8298L12.5488 10.2835L15.7099 7.06515C16.2781 6.48709 15.9641 5.47784 15.1805 5.35911L10.8112 4.69357L8.85832 0.556577C8.50841 -0.180831 7.49458 -0.190205 7.14168 0.556577Z"})],-1)),J=[U],H={class:"flex justify-between my-2"},z={class:"flex flex-1 bg-gray-decolight rounded-xl mr-2"},$=P(()=>Object(r["h"])("span",{class:"text-xs"},"成人",-1)),q={class:"text-2xl font-bold leading-6 mb-1.5"},R={class:"flex flex-1 bg-gray-decolight rounded-xl"},W=P(()=>Object(r["h"])("span",{class:"text-xs"},"兒童",-1)),Y={class:"text-2xl font-bold leading-6 mb-1.5"},Z={class:"text-xs text-gray-inline"},G={class:"text-sm text-gray-inline mt-0.5 mb-1.5"},K={class:"flex text-sm text-gray-tips relative"},Q=P(()=>Object(r["h"])("div",{class:"absolute w-full h-px bg-gray-decolight"},null,-1)),V=P(()=>Object(r["h"])("div",{class:"absolute w-px h-3/5 top-2/4 left-2/4 -translate-y-1/2 bg-gray-decolight"},null,-1)),X=["href"],tt=P(()=>Object(r["h"])("img",{class:"mr-1",src:D.a,alt:"look location in your map"},null,-1)),et=P(()=>Object(r["h"])("span",null,"開啟地圖",-1)),at=[tt,et],rt=["href"],st=P(()=>Object(r["h"])("img",{class:"mr-1",src:_.a,alt:"call the pharmacy number"},null,-1)),ot=P(()=>Object(r["h"])("span",null,"撥打電話",-1)),ct=[st,ot];function lt(t,e,a,s,o,c){return Object(r["t"])(!0),Object(r["g"])(r["a"],null,Object(r["z"])(a.listData,t=>(Object(r["t"])(),Object(r["g"])("section",{id:t.properties.id,key:t.properties.id,class:"pharmacyCard flex-none w-4/5 md:w-full bg-white shadow rounded-2xl px-4 pt-2.5 mr-4 md:mr-0 md:mb-4"},[Object(r["h"])("div",L,[Object(r["h"])("h5",{onClick:e[0]||(e[0]=t=>c.activeMarker(t)),"data-geo":t.geometry.coordinates,"data-adult":t.properties.mask_adult,"data-child":t.properties.mask_child,class:"cursor-pointer flex-1 flex justify-between items-center font-medium"},[Object(r["i"])(Object(r["C"])(t.properties.name)+" ",1),t.properties.distance?(Object(r["t"])(),Object(r["g"])("span",N,"距離 "+Object(r["C"])(t.properties.distance)+"km",1)):Object(r["f"])("",!0)],8,F),Object(r["h"])("fieldset",A,[Object(r["h"])("input",{onClick:e[1]||(e[1]=t=>c.clickMarkStar(t)),"data-id":t.properties.id,value:"markStar",class:"hidden",type:"checkbox",id:"markStar"+t.properties.id,checked:c.ifMarkStar(t.properties.id)},null,8,E),Object(r["h"])("label",{for:"markStar"+t.properties.id,class:"block cursor-pointer relative -top-0.5"},J,8,B)])]),Object(r["h"])("ul",H,[Object(r["h"])("li",z,[Object(r["h"])("img",{class:Object(r["p"])([{little:t.properties.mask_adult<=a.maskCutPoint&&t.properties.mask_adult>0,outof:0==t.properties.mask_adult},"w-8 ml-2 mr-1"]),src:w.a,alt:"adult icon"},null,2),Object(r["h"])("div",{class:Object(r["p"])({"text-enough-color":t.properties.mask_adult>a.maskCutPoint,"text-little-color":t.properties.mask_adult<=a.maskCutPoint&&t.properties.mask_adult>0,"text-gray-tips":0==t.properties.mask_adult})},[$,Object(r["h"])("p",q,Object(r["C"])(t.properties.mask_adult),1)],2)]),Object(r["h"])("li",R,[Object(r["h"])("img",{class:Object(r["p"])([{little:t.properties.mask_child<=a.maskCutPoint&&t.properties.mask_child>0,outof:0==t.properties.mask_child},"w-8 ml-2 mr-1"]),src:C.a,alt:"child icon"},null,2),Object(r["h"])("div",{class:Object(r["p"])({"text-enough-color":t.properties.mask_child>a.maskCutPoint,"text-little-color":t.properties.mask_child<=a.maskCutPoint&&t.properties.mask_child>0,"text-gray-tips":0==t.properties.mask_child})},[W,Object(r["h"])("p",Y,Object(r["C"])(t.properties.mask_child),1)],2)])]),Object(r["h"])("p",Z,Object(r["C"])(t.properties.address),1),Object(r["h"])("p",G,Object(r["C"])(t.properties.phone),1),Object(r["h"])("div",K,[Q,V,Object(r["h"])("a",{href:"https://www.google.com/maps/place/"+t.properties.address,target:"_blank",class:"flex flex-1 justify-center items-center pt-2.5 pb-2"},at,8,X),Object(r["h"])("a",{href:"tel:"+t.properties.phone,class:"flex flex-1 justify-center items-center pt-2.5 pb-2"},ct,8,rt)])],8,I))),128)}var it=a("1344"),nt=Object(it["a"])(),dt={name:"pharmacyCard",props:{listData:[Array,Object],maskCutPoint:[Number]},methods:{activeMarker(t){nt.emit("active_marker",{geo:t.target.dataset.geo,adult:t.target.dataset.adult,child:t.target.dataset.child});const e=t.target.parentNode.parentNode,a=e.parentNode.childNodes;a.forEach(t=>{t.childNodes.length>0&&t.classList.remove("active")}),e.classList.add("active")},clickMarkStar(t){const e=JSON.parse(localStorage.getItem("daylilyMaskMap"));e.forEach((a,r)=>{a===t.target.dataset.id&&(e.splice(r,1),localStorage.setItem("daylilyMaskMap",JSON.stringify(e)))}),t.target.checked&&(e.push(t.target.dataset.id),localStorage.setItem("daylilyMaskMap",JSON.stringify(e)))},ifMarkStar(t){const e=JSON.parse(localStorage.getItem("daylilyMaskMap"));if(!e.length)return!1;for(let a=0;a<e.length;a++)if(e[a]===t)return!0}}};a("507e");const pt=c()(dt,[["render",lt],["__scopeId","data-v-3d389a57"]]);var ht=pt,ut=a("2091"),mt=a.n(ut),bt=a("4b18"),ft=a.n(bt),xt=a("eef2"),gt=a.n(xt);const jt=t=>(Object(r["w"])("data-v-6fce3417"),t=t(),Object(r["u"])(),t),Ot={class:"w-full fixed md:static top-0 left-0 flex flex-row md:flex-col items-center md:items-start p-4 md:p-0"},kt=jt(()=>Object(r["h"])("div",{class:"w-1/5 flex flex-col md:flex-row items-center pr-2.5 md:pr-0"},[Object(r["h"])("img",{src:mt.a,class:"logo md:mx-2",alt:"MASK Map"}),Object(r["h"])("p",{class:"text-secondary-color whitespace-nowrap text-xs md:text-2xl font-bold pt-1.5 md:pt-0 md:pb-2.5"},"MASK Map")],-1)),vt={class:"w-4/5 md:w-full md:-mt-2.5"},yt=["for"],wt=jt(()=>Object(r["h"])("span",{class:"absolute left-4 top-1/2 -translate-y-2/4"},[Object(r["h"])("img",{src:ft.a,alt:"search"})],-1)),Mt=["value","id"],Ct=jt(()=>Object(r["h"])("img",{src:gt.a,alt:"delete search text"},null,-1)),St=[Ct],Dt={class:"whitespace-nowrap"},Tt=["value","id"],_t=["for"],Pt={class:"whitespace-nowrap text-main-color group-hover:text-white"};function It(t,e,a,s,o,c){return Object(r["t"])(),Object(r["g"])("header",Ot,[kt,Object(r["h"])("div",vt,[Object(r["h"])("label",{class:"relative block",for:"search-"+a.searchFrameDevice},[wt,Object(r["h"])("input",{value:a.searchText,onInput:e[0]||(e[0]=e=>t.$emit("update:searchText",e.target.value)),type:"text",id:"search-"+a.searchFrameDevice,placeholder:"搜 尋 以 下 列 表 藥 局 名",class:"focus:outline-none focus:ring-2 focus:ring-secondary-color w-full h-10 text-sm rounded-full shadow md:shadow-none pl-10 pr-9"},null,40,Mt),a.searchText?(Object(r["t"])(),Object(r["g"])("button",{key:0,onClick:e[1]||(e[1]=e=>t.$emit("delSearchText","")),class:"absolute left-4 top-1/2 -translate-y-2/4 bg-white"},St)):Object(r["f"])("",!0)],8,yt),Object(r["h"])("section",{onWheel:e[3]||(e[3]=Object(r["J"])(t=>c.scrollFilter(t),["prevent"])),class:"filterMask overflow-x-auto mt-3"},[Object(r["h"])("ul",Dt,[(Object(r["t"])(!0),Object(r["g"])(r["a"],null,Object(r["z"])(o.filter,s=>(Object(r["t"])(),Object(r["g"])("li",{class:"w-1/5 inline-block group text-sm text-center font-bold mr-2",key:s.id},[Object(r["h"])("input",{value:s.id,onInput:e[2]||(e[2]=e=>t.$emit("update:filterMaskBtn",e.target.value)),type:"radio",name:"filterMask",id:s.id+a.searchFrameDevice,class:"hidden"},null,40,Tt),Object(r["h"])("label",{for:s.id+a.searchFrameDevice,class:"block group-hover:bg-gray-title bg-third-color py-1.5 cursor-pointer rounded-full"},[Object(r["h"])("span",Pt,Object(r["C"])(s.text),1)],8,_t)]))),128))])],32)])])}var Lt={name:"searchFrame",props:{searchFrameDevice:String,mapData:[Array,Object],searchText:String},emits:["update:searchText","delSearchText","update:filterMaskBtn"],data(){return{filter:[{id:"基隆市",text:"基隆"},{id:"臺北市",text:"臺北"},{id:"新北市",text:"新北"},{id:"桃園市",text:"桃園"},{id:"新竹",text:"新竹"},{id:"苗栗縣",text:"苗栗"},{id:"臺中市",text:"臺中"},{id:"彰化縣",text:"彰化"},{id:"南投縣",text:"南投"},{id:"雲林縣",text:"雲林"},{id:"嘉義",text:"嘉義"},{id:"臺南市",text:"臺南"},{id:"高雄市",text:"高雄"},{id:"屏東縣",text:"屏東"},{id:"宜蘭縣",text:"宜蘭"},{id:"花蓮縣",text:"花蓮"},{id:"臺東縣",text:"臺東"},{id:"澎湖縣",text:"澎湖"},{id:"金門縣",text:"金門"},{id:"連江縣",text:"連江"}]}},methods:{scrollFilter(t){document.querySelectorAll(".filterMask").forEach(e=>{e.scrollLeft+=2*t.deltaY})}}};a("9630");const Ft=c()(Lt,[["render",It],["__scopeId","data-v-6fce3417"]]);var Nt=Ft,At=a("2e6d"),Et=a.n(At);const Bt=["for"],Ut=Object(r["h"])("img",{class:"cursor-pointer mx-auto",src:Et.a,alt:"research"},null,-1),Jt=Object(r["h"])("p",{class:"cursor-pointer relative -top-px bg-third-color text-main-color font-medium rounded-full text-center py-1 px-10"},"重 新 搜 尋",-1),Ht=[Ut,Jt];function zt(t,e,a,s,o,c){return Object(r["t"])(),Object(r["g"])("label",{for:"search-"+a.searchFrameDevice,class:"research mr-4 md:mr-0 md:mb-4"},Ht,8,Bt)}var $t={name:"researchButton",props:{searchFrameDevice:String}};const qt=c()($t,[["render",zt]]);var Rt=qt,Wt=a("4244"),Yt=a.n(Wt);const Zt=t=>(Object(r["w"])("data-v-e4978324"),t=t(),Object(r["u"])(),t),Gt=Zt(()=>Object(r["h"])("img",{src:Yt.a,alt:""},null,-1)),Kt=[Gt],Qt={class:"z-20 fixed w-full h-full flex justify-center items-center"},Vt={class:"bg-white text-gray-title shadow rounded-2xl relative z-50 pt-4 pb-5"},Xt=Zt(()=>Object(r["h"])("h5",{class:"px-8 text-xl font-medium text-center md:text-left"},"The Color Tips of Mask Number",-1)),te=Zt(()=>Object(r["h"])("hr",{class:"w-full h-px my-4 bg-gray-decolight border-0"},null,-1)),ee=Zt(()=>Object(r["h"])("ul",{class:"flex flex-col md:flex-row px-8"},[Object(r["h"])("li",{class:"flex justify-center items-center mb-4 md:mb-0 md:mr-8"},[Object(r["h"])("span",{class:"inline-block w-16 h-8 mr-2 rounded-full bg-enough-color text-xs text-white flex justify-center items-center"},"10 ↑"),Object(r["i"])("Sufficient ")]),Object(r["h"])("li",{class:"flex justify-center items-center mb-4 md:mb-0 md:mr-8"},[Object(r["h"])("span",{class:"inline-block w-16 h-8 mr-2 rounded-full bg-little-color text-xs text-white flex justify-center items-center"},"10 ↓"),Object(r["i"])("Less ")]),Object(r["h"])("li",{class:"flex justify-center items-center"},[Object(r["h"])("span",{class:"inline-block w-16 h-8 mr-2 rounded-full bg-gray-tips text-xs text-white flex justify-center items-center"},"0"),Object(r["i"])("Run out ")])],-1)),ae={class:"text-sm text-gray-tips text-center mt-5 mb-4 px-4"},re=Object(r["i"])(" ※ The color depends on the mask quantity of adult"),se=Zt(()=>Object(r["h"])("br",null,null,-1)),oe=Object(r["i"])(" ※ Clicking the Pharmacy name can move to the map point"),ce=Zt(()=>Object(r["h"])("br",null,null,-1)),le=Zt(()=>Object(r["h"])("br",null,null,-1)),ie=Object(r["i"])(" The stock last updated : "),ne=Zt(()=>Object(r["h"])("br",{class:"sm:hidden"},null,-1)),de=Zt(()=>Object(r["h"])("br",null,null,-1)),pe=Object(r["i"])(" Hotline 1922 ｜ Mask Info 1919 "),he=Zt(()=>Object(r["h"])("p",{class:"text-sm font-medium text-center px-4"},[Object(r["i"])(" This site serves for Taiwan"),Object(r["h"])("br"),Object(r["h"])("a",{href:"https://github.com/daylilystudio",target:"_blank"},"→ Author's Github")],-1));function ue(t,e,a,s,o,c){return Object(r["t"])(),Object(r["g"])(r["a"],null,[Object(r["h"])("div",{onClick:e[0]||(e[0]=t=>o.ifOpenInfo=!o.ifOpenInfo),class:"fixed right-4 md:right-2 top-1/3 md:top-3 bg-white p-2.5 rounded-full shadow md:shadow-pc cursor-pointer"},Kt),Object(r["j"])(r["b"],null,{default:Object(r["H"])(()=>[Object(r["I"])(Object(r["h"])("div",Qt,[Object(r["h"])("div",Vt,[Xt,te,ee,Object(r["h"])("p",ae,[re,se,oe,ce,le,ie,ne,Object(r["i"])(Object(r["C"])(a.mapData[0].properties.updated),1),de,pe]),he,Object(r["h"])("button",{onClick:e[1]||(e[1]=t=>o.ifOpenInfo=!o.ifOpenInfo),class:"absolute text-gray-deco -top-9 left-1/2 -translate-x-1/2"},"╳")]),Object(r["h"])("div",{onClick:e[2]||(e[2]=t=>o.ifOpenInfo=!o.ifOpenInfo),class:"absolute w-full h-full bg-black bg-opacity-50"})],512),[[r["F"],o.ifOpenInfo]])]),_:1})],64)}var me={name:"infoModal",props:{mapData:[Array,Object]},data(){return{ifOpenInfo:!1}}};a("2388");const be=c()(me,[["render",ue],["__scopeId","data-v-e4978324"]]);var fe=be;const xe={id:"map",class:"w-full top-0 bottom-0"};function ge(t,e,a,s,o,c){return Object(r["t"])(),Object(r["g"])("div",xe)}var je=a("e192"),Oe=a.n(je);const ke=a("595b");var ve={name:"mapFrame",props:{mapAllData:[Array,Object],maskCutPoint:[Number]},inject:["data"],methods:{createMarker(t){t.forEach(t=>{const e=document.createElement("div");e.dataset.id=t.properties.id,t.properties.mask_adult>this.maskCutPoint?e.className="markerEnough":t.properties.mask_adult<=this.maskCutPoint&&t.properties.mask_adult>0?e.className="markerLittle":e.className="markerOutof",new Oe.a.Marker(e).setLngLat(t.geometry.coordinates).addTo(this.map),e.addEventListener("click",e=>{this.createPopUp(t.geometry.coordinates,t.properties.mask_adult,t.properties.mask_child),this.activeCard(e),e.stopPropagation()})})},removeMark(){document.querySelectorAll(".markerEnough, .markerLittle, .markerOutof").forEach(t=>{t.remove()})},flyToStore(t){this.map.flyTo({center:t,zoom:14})},createPopUp(t,e,a){const r=document.getElementsByClassName("mapboxgl-popup");r[0]&&r[0].remove();let s="",o="";s=e>this.maskCutPoint?"text-enough-color":e<=this.maskCutPoint&&e>0?"text-little-color":"text-gray-tips",o=a>this.maskCutPoint?"text-enough-color":a<=this.maskCutPoint&&a>0?"text-little-color":"text-gray-tips",new Oe.a.Popup({offset:22,closeOnClick:!1,closeButton:!1,anchor:"bottom"}).setLngLat(t).setHTML(`<span class="${s}">${e}</span> | <span class="${o}">${a}</span>`).addTo(this.map)},activeCard(t){const e=document.getElementById(t.target.dataset.id),a=e.parentNode.childNodes;a.forEach(t=>{t.childNodes.length>0&&t.classList.remove("active")}),e.classList.add("active"),e.scrollIntoView({behavior:"smooth",inline:"start"})}},mounted(){Oe.a.accessToken="pk.eyJ1Ijoib3dlbmxhbWIiLCJhIjoiY2lleWljcnF4MDBiOXQ0bHR0anRvamtucSJ9.t3YnHHqvQZ8Y0MTCNy0NNw",this.map=new Oe.a.Map({attributionControl:!1,container:"map",style:"mapbox://styles/mapbox/light-v9",center:[121.513104,25.114259],zoom:12}),this.map.addControl(new Oe.a.NavigationControl({showCompass:!1,showZoom:!0,visualizePitch:!1}),"bottom-right");const t=new Oe.a.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0,showUserHeading:!0,fitBoundsOptions:{zoom:14}});this.map.addControl(t,"bottom-right"),this.map.on("load",()=>{t.trigger(),"geolocation"in navigator?navigator.geolocation.getCurrentPosition(t=>{this.data.features=[];const e=ke.point([t.coords.longitude,t.coords.latitude]);this.mapAllData.forEach(t=>{const a=ke.point(t.geometry.coordinates),r=ke.distance(e,a,{units:"kilometers"}),s=Math.round(100*r)/100;s<=5&&(t.properties.distance=s,this.data.features.push(t))}),this.data.features.sort((t,e)=>t.properties.distance>e.properties.distance?1:t.properties.distance<e.properties.distance?-1:0),this.createMarker(this.data.features)},t=>{this.data.features=this.mapAllData.slice(0,50),this.createMarker(this.data.features),console.warn(`ERROR(${t.code}): ${t.message}`)}):console.log("no geolocation")})},watch:{data:{handler(t){this.removeMark(),this.createMarker(t.features)},deep:!0}},created(){nt.on("active_marker",t=>{const e=t.geo.split(",");this.flyToStore(e),this.createPopUp(e,t.adult,t.child)})}};a("d5d7");const ye=c()(ve,[["render",ge]]);var we=ye,Me=a("bc3a"),Ce=a.n(Me),Se={name:"Home",components:{pharmacyCard:ht,searchFrame:Nt,researchButton:Rt,infoModal:fe,mapFrame:we},data(){return{apiUrl:"points.json",maskCutPoint:10,data:{features:[{properties:{id:"",name:"",phone:"",address:"",mask_adult:"0",mask_child:"0",updated:""},geometry:{type:"Point",coordinates:[0,0]}}]},allData:[],allDataForStar:{},starData:[],searchText:"",filterMask:"",showMaskStar:!1}},provide(){return{data:this.data}},methods:{collapse(){const t=document.querySelector("aside");t.classList.toggle("collapse")},onDelSearchText(t){this.searchText=t,document.querySelector(".pharmacyContain").scrollTop=0},getStarData(){const t=JSON.parse(localStorage.getItem("daylilyMaskMap"));this.starData=[],t.forEach(t=>{this.starData.push(this.allDataForStar[t])})},init(){Ce.a.get(this.apiUrl).then(t=>{this.allData=t.data.features,t.data.features.forEach(t=>{this.allDataForStar[t.properties.id]=t})}).catch(t=>{console.log("error:",t)})}},computed:{filterData(){let t=[];return this.filterMask?(t=this.allData.filter(t=>t.properties.address.match(this.filterMask)),document.querySelector(".pharmacyContain").scrollTop=0,t):t},searchData(){return this.data.features.filter(t=>t.properties.name.match(this.searchText))},starDataWithSearch(){return this.starData.filter(t=>t.properties.name.match(this.searchText))}},watch:{filterData(t){this.data.features=t}},created(){localStorage.getItem("daylilyMaskMap")||localStorage.setItem("daylilyMaskMap","[]"),this.init()}};a("9bce");const De=c()(Se,[["render",v]]);var Te=De;const _e=[{path:"/",name:"Home",component:Te},{path:"/about",name:"About",component:()=>a.e("about").then(a.bind(null,"f820"))}],Pe=Object(d["a"])({history:Object(d["b"])(),routes:_e});var Ie=Pe;a("a766"),a("ac6d");Object(r["d"])(n).use(Ie).mount("#app")},"6dd3":function(t,e,a){t.exports=a.p+"img/icon_map.6b28d98b.svg"},7875:function(t,e,a){},9630:function(t,e,a){"use strict";a("3af5")},"9bce":function(t,e,a){"use strict";a("f08c")},a766:function(t,e,a){},d078:function(t,e,a){t.exports=a.p+"img/icon_child.212a6239.svg"},d1e7:function(t,e,a){},d3e2:function(t,e,a){t.exports=a.p+"img/nodata.cb638945.png"},d5d7:function(t,e,a){"use strict";a("48e7")},df43:function(t,e,a){t.exports=a.p+"img/icon_arrow.c75c4acf.svg"},eef2:function(t,e,a){t.exports=a.p+"img/icon_del.ca6198f4.svg"},f08c:function(t,e,a){}});
//# sourceMappingURL=app.8bc61bd4.js.map