import{x as b,y as A,r as t,z as m,A as h}from"./index.bcad466f.js";const T=b("global",()=>{const v=A("axios"),k=t(!1),l=t(!1),c=t(!1),f=t(!1),$=t([{name:"\u5168\u90E8\u5546\u54C1",en:"Products",link:"/products",key:"all"},{name:"\u8C93\u306E\u98DF\u54C1",en:"Cat\xB4s Food",link:"/products?category=food",key:"food"},{name:"\u8C93\u306E\u7528\u54C1",en:"Cat\xB4s Use",link:"/products?category=use",key:"use"},{name:"\u8C93\u306E\u73A9\u5177",en:"Cat\xB4s Toy",link:"/products?category=toy",key:"toy"},{name:"\u767B\u5165\u5F8C\u53F0",en:"Admin",link:"/login",key:"login"}]),r=m({});Object.keys(window.localStorage).filter(e=>e.match(/meowforestFav/gi)).forEach(e=>{r[e]=!0});const F=e=>{window.localStorage.getItem("meowforestFav"+e)==="y"?(window.localStorage.removeItem("meowforestFav"+e),r["meowforestFav"+e]=!1):(window.localStorage.setItem("meowforestFav"+e,"y"),r["meowforestFav"+e]=!0,window.$message.success("Added Fav !"))},g=t([]);async function I(){if(g.value.length>0)return;const e="https://vue3-course-api.hexschool.io/api/daylily-api/products/all";await v.get(e).then(a=>{a.data.success&&(g.value=a.data.products)}).catch(a=>{window.$message.error(a.toString())})}const i=t([]);async function p(){l.value=!0;const e="https://vue3-course-api.hexschool.io/api/daylily-api/cart";v.get(e).then(a=>{i.value=a.data.data,l.value=!1}).catch(a=>{window.$message.error(a.toString()),l.value=!1})}async function S(e,a){c.value=!0;const x="https://vue3-course-api.hexschool.io/api/daylily-api/cart";try{const s=await v.post(x,{data:{product_id:e,qty:a}});if(s){const C=s.data.success?"success":"error";window.$message[C](s.data.message),await p()}return c.value=!1,f.value=!0,setTimeout(()=>{f.value=!1},1100),s}catch(s){return c.value=!1,s}}const y=t(""),u=t(""),o=t(0);h(u,e=>{o.value=e==="delivery"?80:0,o.value=i.value.final_total>3e3?0:o.value}),h(i,e=>{o.value=u.value==="delivery"?80:0,o.value=e.final_total>3e3?0:o.value});const n=m({name:"",tel:"",email:"",add:""}),w=t(""),d=m({number:"",valid:"",cvv:""});return{loadingPage:k,loading:l,loadingAdd:c,addingCart:f,menu:$,isfav:r,toggleFav:F,getProducts:I,products:g,getCart:p,addCart:S,cart:i,payment:y,shipping:u,shippingMoney:o,userInfo:n,msg:w,cardInfo:d,initInfo:()=>{y.value="",u.value="",o.value=0,n.name="",n.tel="",n.email="",n.add="",w.value="",d.number="",d.valid="",d.cvv=""}}});export{T as u};
