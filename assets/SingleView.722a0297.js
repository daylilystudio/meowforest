import{u as E,a as H,r as $,o as R,M as G,c as q,d,e as h,k as p,f as o,w as C,j as v,t as T,i as V,g as f,m as A,l as D,v as O,n as B,F as N,h as F,s as J}from"./index.b8e1bcd1.js";import{_ as K}from"./nodata.9b2f1321.js";import{_ as Q}from"./TheHeader.9db50ab0.js";import{a as W}from"./api.a81b7417.js";import{i as X,$ as j,a as U,S as z}from"./pagination.min.851336c1.js";import{u as Y}from"./global.6d707793.js";import{_ as Z}from"./plugin-vueexport-helper.2444895f.js";import{N as ee}from"./Tag.e793a652.js";import{N as te}from"./InputNumber.cc52d6e5.js";import"./Input.0b05cdbc.js";import"./use-merged-state.d60ce25f.js";function se({swiper:e,extendParams:M,on:P}){M({thumbs:{swiper:null,multipleActiveThumbs:!0,autoScrollOffset:0,slideThumbActiveClass:"swiper-slide-thumb-active",thumbsContainerClass:"swiper-thumbs"}});let i=!1,y=!1;e.thumbs={swiper:null};function _(){const a=e.thumbs.swiper;if(!a||a.destroyed)return;const t=a.clickedIndex,r=a.clickedSlide;if(r&&j(r).hasClass(e.params.thumbs.slideThumbActiveClass)||typeof t>"u"||t===null)return;let n;if(a.params.loop?n=parseInt(j(a.clickedSlide).attr("data-swiper-slide-index"),10):n=t,e.params.loop){let m=e.activeIndex;e.slides.eq(m).hasClass(e.params.slideDuplicateClass)&&(e.loopFix(),e._clientLeft=e.$wrapperEl[0].clientLeft,m=e.activeIndex);const b=e.slides.eq(m).prevAll(`[data-swiper-slide-index="${n}"]`).eq(0).index(),g=e.slides.eq(m).nextAll(`[data-swiper-slide-index="${n}"]`).eq(0).index();typeof b>"u"?n=g:typeof g>"u"?n=b:g-m<m-b?n=g:n=b}e.slideTo(n)}function S(){const{thumbs:a}=e.params;if(i)return!1;i=!0;const t=e.constructor;if(a.swiper instanceof t)e.thumbs.swiper=a.swiper,Object.assign(e.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),Object.assign(e.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1});else if(X(a.swiper)){const r=Object.assign({},a.swiper);Object.assign(r,{watchSlidesProgress:!0,slideToClickedSlide:!1}),e.thumbs.swiper=new t(r),y=!0}return e.thumbs.swiper.$el.addClass(e.params.thumbs.thumbsContainerClass),e.thumbs.swiper.on("tap",_),!0}function u(a){const t=e.thumbs.swiper;if(!t||t.destroyed)return;const r=t.params.slidesPerView==="auto"?t.slidesPerViewDynamic():t.params.slidesPerView;let n=1;const m=e.params.thumbs.slideThumbActiveClass;if(e.params.slidesPerView>1&&!e.params.centeredSlides&&(n=e.params.slidesPerView),e.params.thumbs.multipleActiveThumbs||(n=1),n=Math.floor(n),t.slides.removeClass(m),t.params.loop||t.params.virtual&&t.params.virtual.enabled)for(let l=0;l<n;l+=1)t.$wrapperEl.children(`[data-swiper-slide-index="${e.realIndex+l}"]`).addClass(m);else for(let l=0;l<n;l+=1)t.slides.eq(e.realIndex+l).addClass(m);const b=e.params.thumbs.autoScrollOffset,g=b&&!t.params.loop;if(e.realIndex!==t.realIndex||g){let l=t.activeIndex,s,I;if(t.params.loop){t.slides.eq(l).hasClass(t.params.slideDuplicateClass)&&(t.loopFix(),t._clientLeft=t.$wrapperEl[0].clientLeft,l=t.activeIndex);const w=t.slides.eq(l).prevAll(`[data-swiper-slide-index="${e.realIndex}"]`).eq(0).index(),x=t.slides.eq(l).nextAll(`[data-swiper-slide-index="${e.realIndex}"]`).eq(0).index();typeof w>"u"?s=x:typeof x>"u"?s=w:x-l===l-w?s=t.params.slidesPerGroup>1?x:l:x-l<l-w?s=x:s=w,I=e.activeIndex>e.previousIndex?"next":"prev"}else s=e.realIndex,I=s>e.previousIndex?"next":"prev";g&&(s+=I==="next"?b:-1*b),t.visibleSlidesIndexes&&t.visibleSlidesIndexes.indexOf(s)<0&&(t.params.centeredSlides?s>l?s=s-Math.floor(r/2)+1:s=s+Math.floor(r/2)-1:s>l&&t.params.slidesPerGroup,t.slideTo(s,a?0:void 0))}}P("beforeInit",()=>{const{thumbs:a}=e.params;!a||!a.swiper||(S(),u(!0))}),P("slideChange update resize observerUpdate",()=>{u()}),P("setTransition",(a,t)=>{const r=e.thumbs.swiper;!r||r.destroyed||r.setTransition(t)}),P("beforeDestroy",()=>{const a=e.thumbs.swiper;!a||a.destroyed||y&&a.destroy()}),Object.assign(e.thumbs,{init:S,update:u})}const le={class:"container"},ae={class:"tw-drop-shadow-main -tw-mt-24 tw-mb-4 tw-text-white"},ie={key:0,class:"tw-shadow-main md:tw-grid tw-gap-8 tw-grid-cols-2 tw-bg-white tw-rounded-2xl tw-p-6 sm:tw-p-8"},oe={class:"tw-relative tw-w-full tw-h-0",style:{"padding-bottom":"75%"}},ne=["src","alt"],re={class:"tw-flex tw-flex-col tw-mt-2 md:tw-mt-0"},de={class:"tw-flex tw-justify-between tw-items-center"},ue=["innerHTML"],ce={class:"tw-my-4"},me={class:"tw-text-primary tw-text-2xl tw-font-bold tw-mr-3"},pe={class:"tw-mt-auto tw-grid tw-grid-cols-2 tw-gap-4"},fe=["disabled"],we=["disabled"],he={key:0,class:"container tw-mt-10 md:tw-pl-1"},be={class:"tw-flex tw-list-none tw-text-lg tw-font-bold"},ve=["innerHTML"],ge={key:1,class:"tw-mt-8"},xe={class:"tw-font-bold tw-mt-4"},_e={key:1,src:K,class:"tw-block tw-w-3/5 sm:tw-w-60 tw-h-auto tw-mx-auto tw-mt-32",alt:"no data"},ye={__name:"SingleView",setup(e){const M=E(),P=H(),i=$({}),y=$(!1),_=$("spec"),S=$(1),u=Y(),a=M.path.split("/")[2],t=async l=>{u.loadingPage=!0;const s=await W.getProduct(l);s.data.success?i.value=s.data.product:y.value=!0,u.loadingPage=!1};R(()=>{t(a)}),G(l=>{t(l.path.split("/")[2])});const r=$(null),n=l=>{r.value=l},m=[se],b=async l=>{await u.addCart(l,S.value),P.push("/cart")},g=[{title:"Shipping Fees",content:["Free shipping for pick-up at Meow Forest store.Home delivery fee: NTD 80.","Free shipping for single orders over NTD 3,000.","For certain products with specific characteristics such as value, urgency, or size, only one shipping method may be available, and the shipping fee will be indicated on the product page.",'For home delivery, except for special items, the shipping instructions will be provided in the "Notes" section on the product page. Other items will be delivered via a courier service.']},{title:"Delivery Instructions",content:["Delivery will be made within 7 business days (excluding holidays) from the date of payment completion."]},{title:"Return and Exchange Instructions",content:["For any return or exchange requests, please contact us by email at meowforest@mail.com or call 02-12340000. Thank you."]},{title:"Special Event Subscription Instructions",content:["Upon completing the payment, you will be successfully registered for the special event. A separate email notification will be sent before the event. General receipts for the course will be issued by the finance department."]}];return(l,s)=>{var x,L;const I=q("RouterLink"),w=q("FontAwesomeIcon");return d(),h(N,null,[p(Q),o("main",le,[o("div",ae,[p(I,{to:"/",class:"tw-font-bold"},{default:C(()=>[v("Home")]),_:1}),v(" / "),p(I,{to:"/products",class:"tw-font-bold"},{default:C(()=>[v("Product List")]),_:1}),v(" / "),o("span",null,T(i.value.title),1)]),y.value?A("",!0):(d(),h("div",ie,[o("div",null,[o("div",oe,[((x=i.value.imagesUrl)==null?void 0:x.length)>0?(d(),V(f(z),{key:0,modules:m,thumbs:{swiper:r.value},allowTouchMove:((L=i.value.imagesUrl)==null?void 0:L.length)>1,class:"!tw-absolute tw-top-0 tw-w-full tw-h-full"},{default:C(()=>[(d(!0),h(N,null,F(i.value.imagesUrl,(c,k)=>(d(),V(f(U),{key:k,style:J({backgroundImage:`url(${c})`})},null,8,["style"]))),128))]),_:1},8,["thumbs","allowTouchMove"])):A("",!0)]),p(f(z),{allowTouchMove:!1,spaceBetween:8,slidesPerView:5,"watch-slides-progress":"",modules:m,onSwiper:n,id:"thumbs",class:"tw-mt-2 tw-leading-none"},{default:C(()=>[(d(!0),h(N,null,F(i.value.imagesUrl,(c,k)=>(d(),V(f(U),{key:k},{default:C(()=>[o("img",{class:"tw-w-full tw-cursor-pointer",src:c,alt:k},null,8,ne)]),_:2},1024))),128))]),_:1})]),o("div",re,[o("h2",de,[v(T(i.value.title)+" ",1),p(w,{onClick:s[0]||(s[0]=c=>f(u).toggleFav(i.value.id)),icon:[f(u).isfav["meowforestFav"+i.value.id]?"fas":"far","heart"],class:"tw-text-notice tw-p-2 -tw-mr-2 tw-cursor-pointer"},null,8,["icon"])]),p(f(ee),{bordered:!1,round:"",type:"success",class:"tw-self-start"},{default:C(()=>[v(T(i.value.category),1)]),_:1}),o("p",{class:"tw-mt-6",innerHTML:i.value.description},null,8,ue),o("p",ce,[o("span",me,"NTD. "+T(i.value.price),1),o("del",null,"NTD. "+T(i.value.origin_price),1)]),o("p",pe,[p(f(te),{class:"tw-col-span-2",value:S.value,"onUpdate:value":s[1]||(s[1]=c=>S.value=c),min:1,size:"large","button-placement":"both"},null,8,["value"]),o("button",{type:"button",disabled:f(u).loadingAdd,onClick:s[2]||(s[2]=c=>f(u).addCart(i.value.id,S.value)),class:"tw-bg-second hover:tw-brightness-90 tw-rounded-full tw-text-theme tw-font-bold tw-text-base tw-p-2.5 tw-border-0 tw-cursor-pointer"},[p(w,{icon:["fas","plus"]}),v(" Add to Cart "),D(p(w,{class:"fa-spin",icon:["fas","spinner"]},null,512),[[O,f(u).loadingAdd]])],8,fe),o("button",{type:"button",disabled:f(u).loadingAdd,onClick:s[3]||(s[3]=c=>b(i.value.id)),class:"tw-bg-third hover:tw-brightness-90 tw-rounded-full tw-text-theme tw-font-bold tw-text-base tw-p-2 tw-border-0 tw-cursor-pointer"},[p(w,{icon:["fas","dollar-sign"]}),v(" Buy Now "),D(p(w,{class:"fa-spin",icon:["fas","spinner"]},null,512),[[O,f(u).loadingAdd]])],8,we)])])]))]),y.value?A("",!0):(d(),h("section",he,[o("ul",be,[o("li",{onClick:s[4]||(s[4]=c=>_.value="spec"),class:B([{active:_.value==="spec"},"menuA tw-cursor-pointer tw-mr-8"])},"Product Spec",2),o("li",{onClick:s[5]||(s[5]=c=>_.value="notice"),class:B([{active:_.value==="notice"},"menuA tw-cursor-pointer"])},"Notice",2)]),_.value==="spec"?(d(),h("div",{key:0,class:"tw-mt-8",innerHTML:i.value.content},null,8,ve)):A("",!0),_.value==="notice"?(d(),h("div",ge,[(d(),h(N,null,F(g,c=>(d(),h(N,{key:c.title},[o("p",xe,[p(w,{icon:["fas","paw"],class:"tw-mr-2"}),v(T(c.title),1)]),(d(!0),h(N,null,F(c.content,k=>(d(),h("p",{key:k,class:"tw-ml-6"},T(k),1))),128))],64))),64))])):A("",!0)])),y.value?(d(),h("img",_e)):A("",!0),p(I,{to:"/products",class:"hover:tw-brightness-90 tw-bg-third tw-rounded-full tw-block tw-font-bold tw-text-center tw-w-3/5 sm:tw-w-60 tw-p-4 tw-mt-10 tw-mx-auto"},{default:C(()=>[v(" Back To Product List ")]),_:1})],64)}}},Ve=Z(ye,[["__scopeId","data-v-e63c29f8"]]);export{Ve as default};
