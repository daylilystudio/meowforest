import{a as U,r as D,J as F,o as I,c as j,d as r,e as c,k as p,w as y,g as o,F as _,h as v,f as t,j as g,t as i,m as N,l as E,au as O,N as q,p as z,q as L}from"./index.a4b4a846.js";import{_ as G}from"./nodata.9b2f1321.js";import{S as H}from"./ShopLayout.88a6d9ac.js";import{a as k}from"./api.a81b7417.js";import{u as J}from"./global.1e98f780.js";import{_ as R}from"./plugin-vueexport-helper.2444895f.js";import{N as Q}from"./Spin.12fe9893.js";import{N as X}from"./InputNumber.98e1a3ac.js";import"./TheHeader.45e6ddbb.js";import"./use-compitable.1065dfee.js";import"./Input.ac524f33.js";import"./use-merged-state.94eaafc5.js";const u=x=>(z("data-v-fa5406ec"),x=x(),L(),x),Y=u(()=>t("div",{class:"tw-hidden md:tw-grid tw-bg-gray-200 tw-rounded-lg tw-py-2.5 tw-px-3 tw-grid-cols-12"},[t("span",{class:"tw-col-span-6"},"Product"),t("span",{class:"tw-col-span-2"},"Unit Price"),t("span",{class:"tw-col-span-2"},"Qty"),t("span",{class:"tw-col-span-2"},"Total")],-1)),K=u(()=>t("div",{class:"tw-block md:tw-hidden tw-bg-gray-200 tw-rounded-lg tw-py-1 tw-px-4"},"Shop List",-1)),W=["onClick"],Z=["src","alt"],tt={class:"tw-col-span-3 md:tw-col-span-2 tw-flex tw-justify-between"},et={class:"tw-text-primary tw-font-bold"},ot=u(()=>t("span",{class:"tw-mr-4 tw-block md:tw-hidden"},"X",-1)),st={class:"tw-col-span-4 md:tw-col-span-2 tw-flex tw-justify-between"},at=u(()=>t("span",{class:"tw-block md:tw-hidden"},"=",-1)),nt={class:"tw-text-primary tw-font-bold"},lt=["onClick"],rt={class:"tw-text-xl tw-text-right tw-font-bold"},ct={class:"tw-ml-4 tw-text-primary"},it={key:0},dt={key:1,class:"tw-opacity-50 tw-w-2/3 md:tw-w-72 tw-mx-auto tw-mt-16 tw-mb-6"},wt=u(()=>t("img",{src:G,class:"tw-w-full tw-h-auto",alt:"no data"},null,-1)),pt=[wt],ut={key:0,class:"tw-bg-third tw-rounded-2xl tw-flex tw-flex-col md:tw-flex-row tw-gap-6 md:tw-gap-14 tw-p-6"},mt={class:"tw-text-xl tw-font-bold tw-pb-4 tw-mb-4 tw-border-b tw-border-solid tw-border-white"},_t=u(()=>t("span",{class:"tw-text-notice"},"*",-1)),ht=["for"],ft={class:"tw-flex tw-flex-wrap tw-items-center"},gt=["onUpdate:modelValue","value","name","id"],xt=u(()=>t("i",{class:"tw-w-4 tw-h-4 tw-rounded-full tw-mr-2"},null,-1)),bt={class:"tw-font-semibold"},yt={class:"tw-ml-6 tw-mt-2 tw-mb-4 tw-text-primary tw-flex-1"},vt=["onClick"],Ct={class:"tw-text-notice tw-text-lg tw-font-bold"},kt={class:"tw-text-primary tw-font-bold"},Nt={class:"tw-p-2"},St={__name:"CartView",setup(x){const C=U(),b=D(!1),e=J(),S=F(()=>{var d;return((d=e.cart.carts)==null?void 0:d.length)>0?e.payment!==""&&e.shipping!=="":!0}),$=async(d,s,m)=>{e.loading=!0;const h=await k.updateCart(s,{data:{product_id:m,qty:d}});h&&(e.getCart(),window.$message.warning(h.data.message)),e.loading=!1},B=async d=>{e.loading=!0;const s=await k.delCart(d);s&&(e.getCart(),window.$message.warning(s.data.message)),e.loading=!1},M=async d=>{b.value=!1;const s=await k.enterCoupon({data:{code:d}});s&&(e.getCart(),window.$message.warning(s.data.message))};I(()=>{e.getCart()});const V=()=>{e.payment===""?window.$message.warning("Plz choose payment method"):e.shipping===""?window.$message.warning("Plz choose shipping method"):C.push("/checkout")},A=[{title:"94\u611B\u8C93\u54AA",code:"94lovecat",discount:"All Product 10% OFF"},{title:"\u904E\u5E74\u7279\u60E0",code:"CNY",discount:"All Product 50% OFF"}],P=[{title:"Payment Method",name:"payment",option:[{id:"creditcard",txt:"Credit Card",info:"Visa\u3001MasterCard\u3001JCB\u7686\u53EF\u4F7F\u7528\u3002"},{id:"atm",txt:"ATM transfer",info:"\u6703\u63D0\u4F9B\u4E00\u7D44 ATM \u5C08\u7528\u4E4B\u865B\u64EC\u5E33\u865F\uFF0C\u5982\u4E09\u65E5\u5167\u672A\u6536\u5230\u6B3E\u9805\uFF0C\u8A02\u8CFC\u5C07\u6703\u81EA\u52D5\u53D6\u6D88\u3002"}]},{title:"Shipping Method",name:"shipping",option:[{id:"delivery",txt:"Home Delivery",info:"\u5B85\u914D\u904B\u8CBB NTD.80\uFF0C\u6EFF3,000\u514D\u904B"},{id:"pickup",txt:"Store pickup",info:"\u55B5\u68EE\u64DA\u9EDE\u81EA\u53D6\u514D\u904B\uFF0C\u64DA\u9EDE\u5730\u5740\uFF1A\u53F0\u5317\u5E02\u4E2D\u5C71\u5340\u5E78\u904B\u8DEF666\u865F"}]}];return(d,s)=>{var h;const m=j("font-awesome-icon");return r(),c(_,null,[p(H,{breadcrumb:"Shopping Cart",nextBtn:((h=o(e).cart.carts)==null?void 0:h.length)>0?"Checkout":"Back To Home",nextBtnAllow:o(S),onOnGoNext:s[1]||(s[1]=a=>{var l;return((l=o(e).cart.carts)==null?void 0:l.length)>0?V():o(C).push("/")})},{content:y(()=>[p(o(Q),{show:o(e).loading,class:"tw-px-2"},{default:y(()=>{var a,l,w;return[((a=o(e).cart.carts)==null?void 0:a.length)>0?(r(),c(_,{key:0},[Y,K,(r(!0),c(_,null,v((l=o(e).cart)==null?void 0:l.carts,(n,T)=>(r(),c("div",{key:T,class:"tw-relative tw-grid tw-grid-cols-12 tw-gap-y-4 tw-items-center tw-py-5 tw-border-b tw-border-solid tw-border-gray-200"},[t("a",{onClick:f=>o(C).push("/products/"+n.product.id),class:"tw-col-span-12 md:tw-col-span-6 tw-flex tw-items-center tw-cursor-pointer"},[t("img",{src:n.product.imagesUrl[0],alt:n.product.title,class:"tw-w-28 tw-mr-2"},null,8,Z),g(" "+i(n.product.title),1)],8,W),t("span",tt,[t("span",et,"$"+i(n.product.price),1),ot]),p(o(X),{"onUpdate:value":[f=>$(f,n.id,n.product.id),f=>n.qty=f],class:"tw-w-4/5 tw-col-span-5 md:tw-col-span-2 tw-mt-1 tw-text-center",value:n.qty,min:1,size:"small","button-placement":"both"},null,8,["onUpdate:value","value"]),t("span",st,[at,t("span",nt,"$"+i(n.total),1)]),t("p",{onClick:f=>B(n.id),class:"tw-absolute tw-right-0 tw-top-8 md:tw-top-1/2 -tw-translate-y-1/2 tw-p-2 tw-cursor-pointer"},[p(m,{icon:["far","trash-can"]})],8,lt)]))),128)),t("a",{class:"tw-text-primary tw-font-bold tw-block tw-pt-6 tw-pb-2 tw-cursor-pointer",onClick:s[0]||(s[0]=n=>b.value=!0)},[g(" Enter Coupon Code "),p(m,{icon:["fas","caret-right"]})]),t("div",rt,[g(" Subtotal "),t("span",ct,[g("NTD. "+i(o(e).cart.total)+" ",1),(w=o(e).cart.carts[0])!=null&&w.coupon?(r(),c("small",it,"(-"+i(o(e).cart.total-Math.ceil(o(e).cart.final_total))+")",1)):N("",!0)])])],64)):(r(),c("div",dt,pt))]}),_:1},8,["show"])]),order:y(()=>{var a;return[((a=o(e).cart.carts)==null?void 0:a.length)>0?(r(),c("section",ut,[(r(),c(_,null,v(P,l=>t("div",{key:l.title,class:"tw-flex-1"},[t("p",mt,[g(i(l.title)+" ",1),_t]),(r(!0),c(_,null,v(l.option,w=>(r(),c("label",{key:w.id,for:w.id,class:"tw-cursor-pointer"},[t("div",ft,[E(t("input",{"onUpdate:modelValue":n=>o(e)[l.name]=n,value:w.id,name:l.name,type:"radio",id:w.id,class:"tw-hidden"},null,8,gt),[[O,o(e)[l.name]]]),xt,t("span",bt,i(w.txt),1)]),t("p",yt,i(w.info),1)],8,ht))),128))])),64))])):N("",!0)]}),_:1},8,["nextBtn","nextBtnAllow"]),p(o(q),{show:b.value,"onUpdate:show":s[2]||(s[2]=a=>b.value=a),"block-scroll":!1,title:"Enter Coupon",preset:"card",style:{"max-width":"95%",width:"360px"}},{default:y(()=>[(r(),c(_,null,v(A,a=>t("div",{onClick:l=>M(a.code),key:a.code,class:"tw-relative tw-flex tw-justify-between tw-items-center tw-border-b tw-border-dashed tw-border-gray-400 tw-mb-4 tw-px-3 tw-pb-4 tw-cursor-pointer"},[t("div",null,[t("p",Ct,i(a.title),1),t("p",kt,"CODE : "+i(a.code),1),t("span",null,i(a.discount),1)]),t("p",Nt,[p(m,{icon:["far","hand-pointer"],class:"tw-text-theme fa-xl fa-beat"})]),p(m,{icon:["fas","scissors"],class:"tw-absolute tw-text-gray-300 tw-left-20 -tw-bottom-2 fa-lg"})],8,vt)),64))]),_:1},8,["show"])],64)}}},Et=R(St,[["__scopeId","data-v-fa5406ec"]]);export{Et as default};
