import{y as $,r as a,z as m,A as F}from"./index.b92c22bd.js";import{a as g}from"./api.59f3b1c7.js";const j=$("global",()=>{const h=a(!1),i=a(!1),u=a(!1),d=a(!1),k=a([{name:"Products",link:"/products",key:"all"},{name:"Cat\xB4s Food",link:"/products?category=food",key:"food"},{name:"Cat\xB4s Use",link:"/products?category=use",key:"use"},{name:"Cat\xB4s Toy",link:"/products?category=toy",key:"toy"}]),r=m({});Object.keys(window.localStorage).filter(e=>e.match(/meowForestFav/gi)).forEach(e=>{r[e]=!0});const I=e=>{window.localStorage.getItem("meowForestFav"+e)==="y"?(window.localStorage.removeItem("meowForestFav"+e),r["meowForestFav"+e]=!1):(window.localStorage.setItem("meowForestFav"+e,"y"),r["meowForestFav"+e]=!0,window.$message.success("Added Fav !"))},v=a([]);async function S(){if(!(v.value.length>0))try{const e=await g.getProducts();e.data.success&&(v.value=e.data.products)}catch(e){window.$message.error(e.toString())}}const n=a([]);async function f(){try{i.value=!0;const e=await g.getCart();n.value=e.data.data,i.value=!1}catch(e){window.$message.error(e.toString())}}async function C(e,p){try{u.value=!0;const s=await g.addCart({data:{product_id:e,qty:p}});if(u.value=!1,d.value=!0,setTimeout(()=>{d.value=!1},1100),s){const b=s.data.success?"success":"error";window.$message[b](s.data.message),await f()}}catch(s){window.$message.error(s.toString())}}const w=a(""),c=a(""),t=a(0);F(c,e=>{t.value=e==="delivery"?80:0,t.value=n.value.final_total>3e3?0:t.value}),F(n,e=>{t.value=c.value==="delivery"?80:0,t.value=e.final_total>3e3?0:t.value});const o=m({name:"",tel:"",email:"",add:""}),y=a(""),l=m({number:"",valid:"",cvv:""});return{loadingPage:h,loading:i,loadingAdd:u,addingCart:d,menu:k,isFav:r,toggleFav:I,getProducts:S,products:v,getCart:f,addCart:C,cart:n,payment:w,shipping:c,shippingMoney:t,userInfo:o,msg:y,cardInfo:l,initInfo:()=>{w.value="",c.value="",t.value=0,o.name="",o.tel="",o.email="",o.add="",y.value="",l.number="",l.valid="",l.cvv=""}}});export{j as u};
