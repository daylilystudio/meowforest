import{a as I,r as P,K as U,o as j,c as E,d as l,e as i,l as p,w as b,g as s,F as _,h as v,f as t,j as g,t as c,k as N,p as S,m as O,au as q,N as z,q as H,s as L}from"./index.b92c22bd.js";import{_ as G}from"./noData.c8f546d4.js";import{_ as R}from"./ShopLayout.4fefdd2a.js";import{a as k}from"./api.59f3b1c7.js";import{u as Y}from"./global.07552095.js";import{_ as J}from"./plugin-vueexport-helper.2444895f.js";import{N as K}from"./Spin.ca45a334.js";import{N as Q}from"./InputNumber.22eae989.js";import"./TheHeader.6fbf11ff.js";import"./use-compitable.7e155aec.js";import"./Input.250d6b73.js";import"./use-merged-state.defb858b.js";const m=y=>(H("data-v-aa344f94"),y=y(),L(),y),W=m(()=>t("div",{class:"tw-hidden md:tw-grid tw-bg-gray-200 tw-rounded-lg tw-py-2.5 tw-px-3 tw-grid-cols-12"},[t("span",{class:"tw-col-span-6"},"Product"),t("span",{class:"tw-col-span-2"},"Unit Price"),t("span",{class:"tw-col-span-2"},"Qty"),t("span",{class:"tw-col-span-2"},"Total")],-1)),X=m(()=>t("div",{class:"tw-block md:tw-hidden tw-bg-gray-200 tw-rounded-lg tw-py-1 tw-px-4"},"Shop List",-1)),Z=["onClick"],tt=["src","alt"],et={class:"tw-col-span-3 md:tw-col-span-2 tw-flex tw-justify-between"},ot={class:"tw-text-primary tw-font-bold"},st=m(()=>t("span",{class:"tw-mr-4 tw-block md:tw-hidden"},"X",-1)),at={class:"tw-col-span-4 md:tw-col-span-2 tw-flex tw-justify-between"},nt=m(()=>t("span",{class:"tw-block md:tw-hidden"},"=",-1)),rt={class:"tw-text-primary tw-font-bold"},lt=["onClick"],it={class:"tw-text-xl tw-text-right tw-font-bold"},ct={class:"tw-ml-4 tw-text-primary"},dt={key:0},wt={key:1,class:"tw-opacity-50 tw-w-2/3 md:tw-w-72 tw-mx-auto tw-mt-16 tw-mb-6"},pt=m(()=>t("img",{src:G,class:"tw-w-full tw-h-auto",alt:"no data"},null,-1)),ut=[pt],mt={key:0,class:"tw-bg-third tw-rounded-2xl tw-flex tw-flex-col md:tw-flex-row tw-gap-6 md:tw-gap-14 tw-p-6"},ht={class:"tw-text-xl tw-font-bold tw-pb-4 tw-mb-4 tw-border-b tw-border-solid tw-border-white"},_t=m(()=>t("span",{class:"tw-text-notice"},"*",-1)),ft=["for"],gt={class:"tw-flex tw-flex-wrap tw-items-center"},yt=["onUpdate:modelValue","value","name","id"],xt=m(()=>t("i",{class:"tw-w-4 tw-h-4 tw-rounded-full tw-mr-2"},null,-1)),bt={class:"tw-font-semibold"},vt={class:"tw-ml-6 tw-mt-2 tw-mb-4 tw-text-primary tw-flex-1"},Ct=["onClick"],kt={class:"tw-text-notice tw-text-lg tw-font-bold"},Nt={class:"tw-text-primary tw-font-bold"},St={class:"tw-p-2"},$t={__name:"CartView",setup(y){const C=I(),x=P(!1),e=Y(),$=U(()=>{var d;return((d=e.cart.carts)==null?void 0:d.length)>0?e.payment!==""&&e.shipping!=="":!0}),M=async(d,o,h)=>{try{e.loading=!0;const u=await k.updateCart(o,{data:{product_id:h,qty:d}});u&&(e.getCart(),window.$message.warning(u.data.message)),e.loading=!1}catch(u){window.$message.error(u.toString())}},B=async d=>{try{e.loading=!0;const o=await k.delCart(d);o&&(e.getCart(),window.$message.warning(o.data.message)),e.loading=!1}catch(o){window.$message.error(o.toString())}},F=async d=>{x.value=!1;try{const o=await k.enterCoupon({data:{code:d}});o&&(e.getCart(),window.$message.warning(o.data.message))}catch(o){window.$message.error(o.toString())}};j(()=>{e.getCart()});const A=()=>{e.payment===""?window.$message.warning("Plz choose payment method"):e.shipping===""?window.$message.warning("Plz choose shipping method"):C.push("/checkout")},T=[{title:"Love Cat",code:"loveCat",discount:"All Product 10% OFF"},{title:"New Year Special",code:"CNY",discount:"All Product 50% OFF"}],V=[{title:"Payment Method",name:"payment",option:[{id:"creditCard",txt:"Credit Card",info:"Visa, MasterCard, and JCB are all accepted."},{id:"atm",txt:"ATM transfer",info:"We will provide a set of virtual account numbers for ATM payment. If payment is not received within three days, the order will be automatically canceled."}]},{title:"Shipping Method",name:"shipping",option:[{id:"delivery",txt:"Home Delivery",info:"Home delivery fee: NTD.80 Free shipping for orders over NTD.3,000."},{id:"pickup",txt:"Store pickup",info:"Free shipping for pick-up at Meow Forest store. Address: No. 666, lucky St., Zhongshan Dist., Taipei City 104 , Taiwan"}]}];return(d,o)=>{var u;const h=E("FontAwesomeIcon");return l(),i(_,null,[p(R,{breadcrumb:"Shopping Cart",nextBtn:((u=s(e).cart.carts)==null?void 0:u.length)>0?"Checkout":"Back To Home",nextBtnAllow:s($),onOnGoNext:o[1]||(o[1]=a=>{var r;return((r=s(e).cart.carts)==null?void 0:r.length)>0?A():s(C).push("/")})},{content:b(()=>[p(s(K),{show:s(e).loading,class:"tw-px-2"},{default:b(()=>{var a,r,w;return[((a=s(e).cart.carts)==null?void 0:a.length)>0?(l(),i(_,{key:0},[W,X,(l(!0),i(_,null,v((r=s(e).cart)==null?void 0:r.carts,(n,D)=>(l(),i("div",{key:`cart${D}`,class:"tw-relative tw-grid tw-grid-cols-12 tw-gap-y-4 tw-items-center tw-py-5 tw-border-b tw-border-solid tw-border-gray-200"},[t("a",{href:"\u201D#\u201D",onClick:N(f=>s(C).push("/products/"+n.product.id),["prevent"]),class:"tw-col-span-12 md:tw-col-span-6 tw-flex tw-items-center tw-cursor-pointer"},[t("img",{src:n.product.imagesUrl[0],alt:n.product.title,class:"tw-w-28 tw-mr-2"},null,8,tt),g(" "+c(n.product.title),1)],8,Z),t("span",et,[t("span",ot,"$"+c(n.product.price),1),st]),p(s(Q),{"onUpdate:value":[f=>M(f,n.id,n.product.id),f=>n.qty=f],class:"tw-w-4/5 tw-col-span-5 md:tw-col-span-2 tw-mt-1 tw-text-center",value:n.qty,min:1,size:"small","button-placement":"both"},null,8,["onUpdate:value","value"]),t("span",at,[nt,t("span",rt,"$"+c(n.total),1)]),t("p",{onClick:f=>B(n.id),class:"tw-absolute tw-right-0 tw-top-8 md:tw-top-1/2 -tw-translate-y-1/2 tw-p-2 tw-cursor-pointer"},[p(h,{icon:["far","trash-can"]})],8,lt)]))),128)),t("a",{href:"\u201D#\u201D",onClick:o[0]||(o[0]=N(n=>x.value=!0,["prevent"])),class:"tw-text-primary tw-font-bold tw-block tw-pt-6 tw-pb-2 tw-cursor-pointer"},[g(" Enter Coupon Code "),p(h,{icon:["fas","caret-right"]})]),t("div",it,[g(" Subtotal "),t("span",ct,[g("NTD. "+c(s(e).cart.total)+" ",1),(w=s(e).cart.carts[0])!=null&&w.coupon?(l(),i("small",dt,"(-"+c(s(e).cart.total-Math.ceil(s(e).cart.final_total))+")",1)):S("",!0)])])],64)):(l(),i("div",wt,ut))]}),_:1},8,["show"])]),order:b(()=>{var a;return[((a=s(e).cart.carts)==null?void 0:a.length)>0?(l(),i("section",mt,[(l(),i(_,null,v(V,r=>t("div",{key:r.title,class:"tw-flex-1"},[t("p",ht,[g(c(r.title)+" ",1),_t]),(l(!0),i(_,null,v(r.option,w=>(l(),i("label",{key:w.id,for:w.id,class:"tw-cursor-pointer"},[t("div",gt,[O(t("input",{"onUpdate:modelValue":n=>s(e)[r.name]=n,value:w.id,name:r.name,type:"radio",id:w.id,class:"tw-hidden"},null,8,yt),[[q,s(e)[r.name]]]),xt,t("span",bt,c(w.txt),1)]),t("p",vt,c(w.info),1)],8,ft))),128))])),64))])):S("",!0)]}),_:1},8,["nextBtn","nextBtnAllow"]),p(s(z),{show:x.value,"onUpdate:show":o[2]||(o[2]=a=>x.value=a),"block-scroll":!1,title:"Enter Coupon",preset:"card",style:{"max-width":"95%",width:"360px"}},{default:b(()=>[(l(),i(_,null,v(T,a=>t("div",{onClick:r=>F(a.code),key:a.code,class:"tw-relative tw-flex tw-justify-between tw-items-center tw-border-b tw-border-dashed tw-border-gray-400 tw-mb-4 tw-px-3 tw-pb-4 tw-cursor-pointer"},[t("div",null,[t("p",kt,c(a.title),1),t("p",Nt,"CODE : "+c(a.code),1),t("span",null,c(a.discount),1)]),t("p",St,[p(h,{icon:["far","hand-pointer"],class:"tw-text-theme fa-xl fa-beat"})]),p(h,{icon:["fas","scissors"],class:"tw-absolute tw-text-gray-300 tw-left-20 -tw-bottom-2 fa-lg"})],8,Ct)),64))]),_:1},8,["show"])],64)}}},Ot=J($t,[["__scopeId","data-v-aa344f94"]]);export{Ot as default};
