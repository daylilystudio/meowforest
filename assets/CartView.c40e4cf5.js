import{S as I}from"./ShopLayout.ac093d02.js";import{N as P,a as T,r as U,J as D,o as F,c as f,d as r,e as c,j as u,w as y,F as h,g as C,f as t,i as b,t as d,l as V,k as L,au as j,p as E,m as O}from"./index.9e914852.js";import{a as k}from"./api.a81b7417.js";import{u as z}from"./global.ead6d293.js";import{_ as q}from"./nodata.9b2f1321.js";import{_ as G}from"./_plugin-vue_export-helper.cdc0426e.js";import{N as H}from"./Spin.7802d044.js";import{N as J}from"./InputNumber.9936bafc.js";import"./TheHeader.13424155.js";import"./use-compitable.6a87f01f.js";import"./Input.81d015f0.js";import"./use-merged-state.14576474.js";const R={components:{ShopLayout:I,NSpin:H,NInputNumber:J,NModal:P},setup(){const m=T(),i=U(!1),e=z(),o=D(()=>{var n;return((n=e.cart.carts)==null?void 0:n.length)>0?e.payment!==""&&e.shipping!=="":!0}),N=async(n,w,S)=>{e.loading=!0;const x=await k.updateCart(w,{data:{product_id:S,qty:n}});x&&(e.getCart(),window.$message.warning(x.data.message)),e.loading=!1},M=async n=>{e.loading=!0;const w=await k.delCart(n);w&&(e.getCart(),window.$message.warning(w.data.message)),e.loading=!1},v=async n=>{i.value=!1;const w=await k.enterCoupon({data:{code:n}});w&&(e.getCart(),window.$message.warning(w.data.message))};return F(()=>{e.getCart()}),{showModal:i,nextBtnAllow:o,router:m,globalStore:e,updateCart:N,delCart:M,enterCoupon:v,goNext(){e.payment===""?window.$message.warning("Plz choose payment method"):e.shipping===""?window.$message.warning("Plz choose shipping method"):m.push("/checkout")},coupons:[{title:"94\u611B\u8C93\u54AA",code:"94lovecat",discount:"All Product 10% OFF"},{title:"\u904E\u5E74\u7279\u60E0",code:"CNY",discount:"All Product 50% OFF"}],method:[{title:"Payment Method",name:"payment",option:[{id:"creditcard",txt:"Credit Card",info:"Visa\u3001MasterCard\u3001JCB\u7686\u53EF\u4F7F\u7528\u3002"},{id:"atm",txt:"ATM transfer",info:"\u6703\u63D0\u4F9B\u4E00\u7D44 ATM \u5C08\u7528\u4E4B\u865B\u64EC\u5E33\u865F\uFF0C\u5982\u4E09\u65E5\u5167\u672A\u6536\u5230\u6B3E\u9805\uFF0C\u8A02\u8CFC\u5C07\u6703\u81EA\u52D5\u53D6\u6D88\u3002"}]},{title:"Shipping Method",name:"shipping",option:[{id:"delivery",txt:"Home Delivery",info:"\u5B85\u914D\u904B\u8CBB NTD.80\uFF0C\u6EFF3,000\u514D\u904B"},{id:"pickup",txt:"Store pickup",info:"\u55B5\u68EE\u64DA\u9EDE\u81EA\u53D6\u514D\u904B\uFF0C\u64DA\u9EDE\u5730\u5740\uFF1A\u53F0\u5317\u5E02\u4E2D\u5C71\u5340\u5E78\u904B\u8DEF666\u865F"}]}]}}},_=m=>(E("data-v-50578898"),m=m(),O(),m),Q=_(()=>t("div",{class:"tw-hidden md:tw-grid tw-bg-gray-200 tw-rounded-lg tw-py-2.5 tw-px-3 tw-grid-cols-12"},[t("span",{class:"tw-col-span-6"},"Product"),t("span",{class:"tw-col-span-2"},"Unit Price"),t("span",{class:"tw-col-span-2"},"Qty"),t("span",{class:"tw-col-span-2"},"Total")],-1)),X=_(()=>t("div",{class:"tw-block md:tw-hidden tw-bg-gray-200 tw-rounded-lg tw-py-1 tw-px-4"},"Shop List",-1)),Y=["onClick"],K=["src","alt"],W={class:"tw-col-span-3 md:tw-col-span-2 tw-flex tw-justify-between"},Z={class:"tw-text-primary tw-font-bold"},$=_(()=>t("span",{class:"tw-mr-4 tw-block md:tw-hidden"},"X",-1)),tt={class:"tw-col-span-4 md:tw-col-span-2 tw-flex tw-justify-between"},ot=_(()=>t("span",{class:"tw-block md:tw-hidden"},"=",-1)),et={class:"tw-text-primary tw-font-bold"},st=["onClick"],at={class:"tw-text-xl tw-text-right tw-font-bold"},nt={class:"tw-ml-4 tw-text-primary"},lt={key:0},rt={key:1,class:"tw-opacity-50 tw-w-2/3 md:tw-w-72 tw-mx-auto tw-mt-16 tw-mb-6"},ct=_(()=>t("img",{src:q,class:"tw-w-full tw-h-auto",alt:"no data"},null,-1)),dt=[ct],it={key:0,class:"tw-bg-third tw-rounded-2xl tw-flex tw-flex-col md:tw-flex-row tw-gap-6 md:tw-gap-14 tw-p-6"},wt={class:"tw-text-xl tw-font-bold tw-pb-4 tw-mb-4 tw-border-b tw-border-solid tw-border-white"},pt=_(()=>t("span",{class:"tw-text-notice"},"*",-1)),ut=["for"],mt={class:"tw-flex tw-flex-wrap tw-items-center"},_t=["onUpdate:modelValue","value","name","id"],ht=_(()=>t("i",{class:"tw-w-4 tw-h-4 tw-rounded-full tw-mr-2"},null,-1)),gt={class:"tw-font-semibold"},ft={class:"tw-ml-6 tw-mt-2 tw-mb-4 tw-text-primary tw-flex-1"},bt=["onClick"],xt={class:"tw-text-notice tw-text-lg tw-font-bold"},yt={class:"tw-text-primary tw-font-bold"},Ct={class:"tw-p-2"};function vt(m,i,e,o,N,M){var B;const v=f("NInputNumber"),n=f("font-awesome-icon"),w=f("NSpin"),S=f("ShopLayout"),x=f("NModal");return r(),c(h,null,[u(S,{breadcrumb:"Shopping Cart",nextBtn:((B=o.globalStore.cart.carts)==null?void 0:B.length)>0?"Checkout":"Back To Home",nextBtnAllow:o.nextBtnAllow,onOnGoNext:i[1]||(i[1]=s=>{var l;return((l=o.globalStore.cart.carts)==null?void 0:l.length)>0?o.goNext():o.router.push("/")})},{content:y(()=>[u(w,{show:o.globalStore.loading,class:"tw-px-2"},{default:y(()=>{var s,l,p;return[((s=o.globalStore.cart.carts)==null?void 0:s.length)>0?(r(),c(h,{key:0},[Q,X,(r(!0),c(h,null,C((l=o.globalStore.cart)==null?void 0:l.carts,(a,A)=>(r(),c("div",{key:A,class:"tw-relative tw-grid tw-grid-cols-12 tw-gap-y-4 tw-items-center tw-py-5 tw-border-b tw-border-solid tw-border-gray-200"},[t("a",{onClick:g=>o.router.push("/products/"+a.product.id),class:"tw-col-span-12 md:tw-col-span-6 tw-flex tw-items-center tw-cursor-pointer"},[t("img",{src:a.product.imagesUrl[0],alt:a.product.title,class:"tw-w-28 tw-mr-2"},null,8,K),b(" "+d(a.product.title),1)],8,Y),t("span",W,[t("span",Z,"$"+d(a.product.price),1),$]),u(v,{"onUpdate:value":[g=>o.updateCart(g,a.id,a.product.id),g=>a.qty=g],class:"tw-w-4/5 tw-col-span-5 md:tw-col-span-2 tw-mt-1 tw-text-center",value:a.qty,min:1,size:"small","button-placement":"both"},null,8,["onUpdate:value","value"]),t("span",tt,[ot,t("span",et,"$"+d(a.total),1)]),t("p",{onClick:g=>o.delCart(a.id),class:"tw-absolute tw-right-0 tw-top-8 md:tw-top-1/2 -tw-translate-y-1/2 tw-p-2 tw-cursor-pointer"},[u(n,{icon:["far","trash-can"]})],8,st)]))),128)),t("a",{class:"tw-text-primary tw-font-bold tw-block tw-pt-6 tw-pb-2 tw-cursor-pointer",onClick:i[0]||(i[0]=a=>o.showModal=!0)},[b(" Enter Coupon Code "),u(n,{icon:["fas","caret-right"]})]),t("div",at,[b(" Subtotal "),t("span",nt,[b("NTD. "+d(o.globalStore.cart.total)+" ",1),(p=o.globalStore.cart.carts[0])!=null&&p.coupon?(r(),c("small",lt,"(-"+d(o.globalStore.cart.total-Math.ceil(o.globalStore.cart.final_total))+")",1)):V("",!0)])])],64)):(r(),c("div",rt,dt))]}),_:1},8,["show"])]),order:y(()=>{var s;return[((s=o.globalStore.cart.carts)==null?void 0:s.length)>0?(r(),c("section",it,[(r(!0),c(h,null,C(o.method,l=>(r(),c("div",{key:l.title,class:"tw-flex-1"},[t("p",wt,[b(d(l.title)+" ",1),pt]),(r(!0),c(h,null,C(l.option,p=>(r(),c("label",{key:p.id,for:p.id,class:"tw-cursor-pointer"},[t("div",mt,[L(t("input",{"onUpdate:modelValue":a=>o.globalStore[l.name]=a,value:p.id,name:l.name,type:"radio",id:p.id,class:"tw-hidden"},null,8,_t),[[j,o.globalStore[l.name]]]),ht,t("span",gt,d(p.txt),1)]),t("p",ft,d(p.info),1)],8,ut))),128))]))),128))])):V("",!0)]}),_:1},8,["nextBtn","nextBtnAllow"]),u(x,{show:o.showModal,"onUpdate:show":i[2]||(i[2]=s=>o.showModal=s),"block-scroll":!1,title:"Enter Coupon",preset:"card",style:{"max-width":"95%",width:"360px"}},{default:y(()=>[(r(!0),c(h,null,C(o.coupons,s=>(r(),c("div",{onClick:l=>o.enterCoupon(s.code),key:s.code,class:"tw-relative tw-flex tw-justify-between tw-items-center tw-border-b tw-border-dashed tw-border-gray-400 tw-mb-4 tw-px-3 tw-pb-4 tw-cursor-pointer"},[t("div",null,[t("p",xt,d(s.title),1),t("p",yt,"CODE : "+d(s.code),1),t("span",null,d(s.discount),1)]),t("p",Ct,[u(n,{icon:["far","hand-pointer"],class:"tw-text-theme fa-xl fa-beat"})]),u(n,{icon:["fas","scissors"],class:"tw-absolute tw-text-gray-300 tw-left-20 -tw-bottom-2 fa-lg"})],8,bt))),128))]),_:1},8,["show"])],64)}const Ft=G(R,[["render",vt],["__scopeId","data-v-50578898"]]);export{Ft as default};
