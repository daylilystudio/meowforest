import{S as V}from"./ShopLayout.e9712865.js";import{a as B,x as T,r as M,o as U,b as m,c as n,h as D,w as x,j as y,e as s,F as g,g as v,f as o,i as N,t as i,J as I,as as j,k as P,p as q,l as F}from"./index.becd6808.js";import{u as L}from"./global.7623cf1c.js";import{n as z}from"./nodata.d13f7186.js";import{_ as A}from"./_plugin-vue_export-helper.cdc0426e.js";import{N as G}from"./Spin.5eb960f1.js";import{N as H}from"./InputNumber.51803e71.js";import"./TheHeader.9a2dab41.js";import"./use-compitable.fadc9b7f.js";import"./Input.004eadfa.js";import"./use-merged-state.7e774ca8.js";const R={components:{ShopLayout:V,NSpin:G,NInputNumber:H},setup(){const r=B(),w=T("axios"),S=M(0),t=L(),k=(p,_,l)=>{t.loading=!0;const f=`https://vue3-course-api.hexschool.io/api/daylily-api/cart/${_}`;w.put(f,{data:{product_id:l,qty:p}}).then(c=>{c&&(t.getCart(),window.$notification.warning({content:c.data.message,duration:2e3})),t.loading=!1}).catch(c=>{console.log(c),t.loading=!1})},C=p=>{t.loading=!0;const _=`https://vue3-course-api.hexschool.io/api/daylily-api/cart/${p}`;w.delete(_).then(l=>{l&&(t.getCart(),window.$notification.warning({content:l.data.message,duration:2e3})),t.loading=!1}).catch(l=>{console.log(l),t.loading=!1})};return U(()=>{t.getCart()}),{router:r,nodata:z,globalStore:t,deliveryFee:S,updateCart:k,delCart:C,goNext(){if(t.shipping!==""&&t.payment!==""){r.push("/checkout");return}window.$notification.warning({content:"Plz choose payment or shipping method",duration:3e3})},method:[{title:"Payment Method",name:"payment",option:[{id:"creditcard",txt:"Credit Card",info:"\u4EA4\u6613\u5B89\u5168\u7121\u865E\u8ACB\u653E\u5FC3\u4F7F\u7528\u3002\u5982\u8D85\u904E\u4E09\u65E5\u672A\u6536\u5230\u60A8\u7684\u6B3E\u9805\uFF0C\u60A8\u7684\u8A02\u8CFC\u55AE\u5C07\u6703\u81EA\u52D5\u53D6\u6D88\u3002"},{id:"atm",txt:"ATM transfer",info:"\u6703\u63D0\u4F9B\u4E00\u7D44 ATM \u5C08\u7528\u4E4B\u865B\u64EC\u5E33\u865F\uFF0C\u5982\u4E09\u65E5\u5167\u672A\u6536\u5230\u6B3E\u9805\uFF0C\u8A02\u8CFC\u5C07\u6703\u81EA\u52D5\u53D6\u6D88\u3002"}]},{title:"Shipping Method",name:"shipping",option:[{id:"delivery",txt:"Home Delivery",info:"\u5B85\u914D\u904B\u8CBB NTD.80"},{id:"pickup",txt:"Store pickup",info:"\u55B5\u68EE\u64DA\u9EDE\u81EA\u53D6\u514D\u904B\uFF0C\u64DA\u9EDE\u5730\u5740\uFF1A\u53F0\u5317\u5E02\u4E2D\u5C71\u5340\u5E78\u904B\u8DEF666\u865F"}]}]}}},h=r=>(q("data-v-ad663c1c"),r=r(),F(),r),$=h(()=>o("div",{class:"tw-hidden md:tw-grid tw-bg-gray-200 tw-rounded-lg tw-py-2.5 tw-px-3 tw-grid-cols-12"},[o("span",{class:"tw-col-span-6"},"Product"),o("span",{class:"tw-col-span-2"},"Unit Price"),o("span",{class:"tw-col-span-2"},"Qty"),o("span",{class:"tw-col-span-2"},"Total")],-1)),E=h(()=>o("div",{class:"tw-block md:tw-hidden tw-bg-gray-200 tw-rounded-lg tw-py-1 tw-px-4"},"Shop List",-1)),J=["onClick"],O=["src","alt"],Q={class:"tw-col-span-3 md:tw-col-span-2 tw-flex tw-justify-between"},X={class:"text-primary tw-font-bold"},K=h(()=>o("span",{class:"tw-mr-4 tw-block md:tw-hidden"},"X",-1)),W={class:"tw-col-span-4 md:tw-col-span-2 tw-flex tw-justify-between"},Y=h(()=>o("span",{class:"tw-block md:tw-hidden"},"=",-1)),Z={class:"text-primary tw-font-bold"},tt=["onClick"],ot={class:"tw-text-xl tw-text-right tw-font-bold tw-mt-8"},at={class:"tw-ml-4 text-primary"},et={key:1,class:"tw-opacity-50 tw-w-2/3 md:tw-w-72 tw-mx-auto tw-mt-16 tw-mb-6"},nt=["src"],st={key:0,class:"bg-third tw-rounded-2xl tw-flex tw-flex-col md:tw-flex-row tw-gap-6 md:tw-gap-14 tw-p-6"},lt={class:"tw-text-xl tw-font-bold tw-pb-4 tw-mb-4 tw-border-b tw-border-solid tw-border-white"},rt=["for"],ct={class:"tw-flex tw-flex-wrap tw-items-center"},it=["onUpdate:modelValue","value","name","id"],dt=h(()=>o("i",{class:"tw-w-4 tw-h-4 tw-rounded-full tw-mr-2"},null,-1)),wt={class:"tw-font-semibold"},pt={class:"tw-ml-6 tw-mt-2 tw-mb-4 text-primary tw-flex-1"};function _t(r,w,S,t,k,C){var c;const p=m("n-input-number"),_=m("font-awesome-icon"),l=m("n-spin"),f=m("shop-layout");return n(),D(f,{breadcrumb:"Shopping Cart",nextBtn:((c=t.globalStore.cart.carts)==null?void 0:c.length)>0?"Checkout":"Back To Home",onOnGoNext:w[0]||(w[0]=d=>{var e;return((e=t.globalStore.cart.carts)==null?void 0:e.length)>0?t.goNext():t.router.push("/")})},{content:x(()=>[y(l,{show:t.globalStore.loading,class:"tw-px-2"},{default:x(()=>{var d,e;return[((d=t.globalStore.cart.carts)==null?void 0:d.length)>0?(n(),s(g,{key:0},[$,E,(n(!0),s(g,null,v((e=t.globalStore.cart)==null?void 0:e.carts,(a,b)=>(n(),s("div",{key:b,class:"tw-relative tw-grid tw-grid-cols-12 tw-gap-y-4 tw-items-center tw-py-5 tw-border-b tw-border-solid tw-border-gray-200"},[o("a",{onClick:u=>t.router.push("/products/"+a.product.id),class:"tw-col-span-12 md:tw-col-span-6 tw-flex tw-items-center tw-cursor-pointer"},[o("img",{src:a.product.imagesUrl[0],alt:a.product.title,class:"tw-w-28 tw-mr-2"},null,8,O),N(" "+i(a.product.title),1)],8,J),o("span",Q,[o("span",X,"$"+i(a.product.price),1),K]),y(p,{"onUpdate:value":[u=>t.updateCart(u,a.id,a.product.id),u=>a.qty=u],class:"tw-w-4/5 tw-col-span-5 md:tw-col-span-2 tw-mt-1 tw-text-center",value:a.qty,min:1,size:"small","button-placement":"both"},null,8,["onUpdate:value","value"]),o("span",W,[Y,o("span",Z,"$"+i(a.total),1)]),o("p",{onClick:u=>t.delCart(a.id),class:"tw-absolute tw-right-0 tw-top-8 md:tw-top-1/2 -tw-translate-y-1/2 tw-p-2 tw-cursor-pointer"},[y(_,{icon:["far","trash-can"]})],8,tt)]))),128)),o("div",ot,[N(" Subtotal"),o("span",at,"NTD. "+i(t.globalStore.cart.total),1)])],64)):(n(),s("div",et,[o("img",{src:t.nodata,class:"tw-w-full tw-h-auto",alt:"no data"},null,8,nt)]))]}),_:1},8,["show"])]),order:x(()=>{var d;return[((d=t.globalStore.cart.carts)==null?void 0:d.length)>0?(n(),s("section",st,[(n(!0),s(g,null,v(t.method,e=>(n(),s("div",{key:e.title,class:"tw-flex-1"},[o("p",lt,i(e.title),1),(n(!0),s(g,null,v(e.option,a=>(n(),s("label",{key:a.id,for:a.id,class:"tw-cursor-pointer"},[o("div",ct,[I(o("input",{"onUpdate:modelValue":b=>t.globalStore[e.name]=b,value:a.id,name:e.name,type:"radio",id:a.id,class:"tw-hidden"},null,8,it),[[j,t.globalStore[e.name]]]),dt,o("span",wt,i(a.txt),1)]),o("p",pt,i(a.info),1)],8,rt))),128))]))),128))])):P("",!0)]}),_:1},8,["nextBtn"])}const Ct=A(R,[["render",_t],["__scopeId","data-v-ad663c1c"]]);export{Ct as default};
