import{T as D}from"./TheHeader.a4860dbd.js";import{x as B,u as F,a as H,r as T,o as U,b as v,c as w,e as b,j as f,f as c,w as y,i as h,t as S,h as V,k,J as q,M as L,n as O,F as I,g as N,s as z}from"./index.2e2974b4.js";import{i as E,$ as j,S as G,a as R}from"./pagination.min.4e3c47cd.js";import{u as J}from"./global.90d7dab6.js";import{n as K}from"./nodata.d13f7186.js";import{_ as Q}from"./_plugin-vue_export-helper.cdc0426e.js";import{N as W}from"./InputNumber.ff3c141a.js";import{N as X}from"./Tag.90f86563.js";import"./Input.fc596aaa.js";import"./use-merged-state.5101bdac.js";function Y({swiper:e,extendParams:m,on:_}){m({thumbs:{swiper:null,multipleActiveThumbs:!0,autoScrollOffset:0,slideThumbActiveClass:"swiper-slide-thumb-active",thumbsContainerClass:"swiper-thumbs"}});let t=!1,g=!1;e.thumbs={swiper:null};function A(){const a=e.thumbs.swiper;if(!a||a.destroyed)return;const s=a.clickedIndex,n=a.clickedSlide;if(n&&j(n).hasClass(e.params.thumbs.slideThumbActiveClass)||typeof s>"u"||s===null)return;let i;if(a.params.loop?i=parseInt(j(a.clickedSlide).attr("data-swiper-slide-index"),10):i=s,e.params.loop){let r=e.activeIndex;e.slides.eq(r).hasClass(e.params.slideDuplicateClass)&&(e.loopFix(),e._clientLeft=e.$wrapperEl[0].clientLeft,r=e.activeIndex);const u=e.slides.eq(r).prevAll(`[data-swiper-slide-index="${i}"]`).eq(0).index(),d=e.slides.eq(r).nextAll(`[data-swiper-slide-index="${i}"]`).eq(0).index();typeof u>"u"?i=d:typeof d>"u"?i=u:d-r<r-u?i=d:i=u}e.slideTo(i)}function x(){const{thumbs:a}=e.params;if(t)return!1;t=!0;const s=e.constructor;if(a.swiper instanceof s)e.thumbs.swiper=a.swiper,Object.assign(e.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),Object.assign(e.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1});else if(E(a.swiper)){const n=Object.assign({},a.swiper);Object.assign(n,{watchSlidesProgress:!0,slideToClickedSlide:!1}),e.thumbs.swiper=new s(n),g=!0}return e.thumbs.swiper.$el.addClass(e.params.thumbs.thumbsContainerClass),e.thumbs.swiper.on("tap",A),!0}function p(a){const s=e.thumbs.swiper;if(!s||s.destroyed)return;const n=s.params.slidesPerView==="auto"?s.slidesPerViewDynamic():s.params.slidesPerView;let i=1;const r=e.params.thumbs.slideThumbActiveClass;if(e.params.slidesPerView>1&&!e.params.centeredSlides&&(i=e.params.slidesPerView),e.params.thumbs.multipleActiveThumbs||(i=1),i=Math.floor(i),s.slides.removeClass(r),s.params.loop||s.params.virtual&&s.params.virtual.enabled)for(let o=0;o<i;o+=1)s.$wrapperEl.children(`[data-swiper-slide-index="${e.realIndex+o}"]`).addClass(r);else for(let o=0;o<i;o+=1)s.slides.eq(e.realIndex+o).addClass(r);const u=e.params.thumbs.autoScrollOffset,d=u&&!s.params.loop;if(e.realIndex!==s.realIndex||d){let o=s.activeIndex,l,M;if(s.params.loop){s.slides.eq(o).hasClass(s.params.slideDuplicateClass)&&(s.loopFix(),s._clientLeft=s.$wrapperEl[0].clientLeft,o=s.activeIndex);const P=s.slides.eq(o).prevAll(`[data-swiper-slide-index="${e.realIndex}"]`).eq(0).index(),C=s.slides.eq(o).nextAll(`[data-swiper-slide-index="${e.realIndex}"]`).eq(0).index();typeof P>"u"?l=C:typeof C>"u"?l=P:C-o===o-P?l=s.params.slidesPerGroup>1?C:o:C-o<o-P?l=C:l=P,M=e.activeIndex>e.previousIndex?"next":"prev"}else l=e.realIndex,M=l>e.previousIndex?"next":"prev";d&&(l+=M==="next"?u:-1*u),s.visibleSlidesIndexes&&s.visibleSlidesIndexes.indexOf(l)<0&&(s.params.centeredSlides?l>o?l=l-Math.floor(n/2)+1:l=l+Math.floor(n/2)-1:l>o&&s.params.slidesPerGroup,s.slideTo(l,a?0:void 0))}}_("beforeInit",()=>{const{thumbs:a}=e.params;!a||!a.swiper||(x(),p(!0))}),_("slideChange update resize observerUpdate",()=>{p()}),_("setTransition",(a,s)=>{const n=e.thumbs.swiper;!n||n.destroyed||n.setTransition(s)}),_("beforeDestroy",()=>{const a=e.thumbs.swiper;!a||a.destroyed||g&&a.destroy()}),Object.assign(e.thumbs,{init:x,update:p})}const Z={components:{TheHeader:D,Swiper:G,SwiperSlide:R,NInputNumber:W,NTag:X},setup(){const e=B("axios"),m=F(),_=H(),t=T({}),g=T(!1),A=T("spec"),x=T(1),p=T(!1),a=J();U(()=>{a.loadingPage=!0;const u=`https://vue3-course-api.hexschool.io/api/daylily-api/product/${m.path.split("/")[2]}`;e.get(u).then(d=>{d.data.success?t.value=d.data.product:g.value=!0,a.loadingPage=!1}).catch(d=>{console.log(d),g.value=!0,a.loadingPage=!1})});let s=T(null);const n=r=>{s.value=r},i=async r=>{p.value=!0;const u="https://vue3-course-api.hexschool.io/api/daylily-api/cart";try{const d=await e.post(u,{data:{product_id:r,qty:x.value}});return p.value=!1,a.addingCart=!0,setTimeout(()=>{a.addingCart=!1},1100),d}catch(d){return p.value=!1,d}};return{globalStore:a,thumbsSwiper:s,setThumbsSwiper:n,modules:[Y],nodata:K,noProduct:g,product:t,tab:A,addNum:x,loadingAdd:p,async addCart(r){const u=await i(r),d=u.data.success?"success":"error";window.$message[d](u.data.message),await a.getCart()},async buy(r){await i(r),_.push("/cart")},notice:[{title:"\u904B\u8CBB\u8AAA\u660E",content:["\u55B5\u68EE\u64DA\u9EDE\u53D6\u8CA8\u514D\u904B\u8CBB\uFF5C\u5B85\u914D\u5230\u5E9C\u904B\u8CBB 80 \u5143\uFF0C","\u55AE\u7B46\u8A02\u55AE\u6EFF 1,000 \u5143\u514D\u904B\u8CBB\u3002","\u82E5\u56E0\u5176\u5546\u54C1\u50F9\u503C\u3001\u6642\u6548\u6027\u6216\u9AD4\u7A4D\u7B49\u7279\u6027\uFF0C\u50C5\u63D0\u4F9B\u4E00\u7A2E\u51FA\u8CA8\u65B9\u5F0F\u3001\u904B\u8CBB\u4E0D\u540C\u6642\uFF0C\u5C07\u5728\u8A72\u5546\u54C1\u9801\u9762\u544A\u77E5\u3002","\u5B85\u914D\u9664\u7279\u6B8A\u54C1\u9805\uFF0C\u6703\u65BC\u5546\u54C1\u9801\u7684\u300C\u6CE8\u610F\u4E8B\u9805\u300D\u516C\u544A\u914D\u9001\u8AAA\u660E\uFF0C\u5176\u9918\u54C1\u9805\u4F7F\u7528\u5B85\u914D\u901A\u9032\u884C\u914D\u9001\u3002"]},{title:"\u914D\u9001\u8AAA\u660E",content:["\u4ED8\u6B3E\u5B8C\u6210\u65E5\u7B97\u8D77\u76847\u500B\u5DE5\u4F5C\u5929\u5167(\u4E0D\u542B\u4F8B\u5047\u65E5)\u9001\u9054\u3002"]},{title:"\u9000\u63DB\u8CA8\u8AAA\u660E",content:["\u82E5\u6709\u9000\u63DB\u8CA8\u9700\u6C42\uFF0C\u53EF\u4F86\u4FE1 meowforest@mail.com \u6216\u4F86\u96FB 02-12340000 \u6D3D\u8A62\uFF0C\u8B1D\u8B1D\u3002"]},{title:"\u8AB2\u7A0B\u6D3B\u52D5\u8A8D\u8CFC\u8AAA\u660E",content:["\u51E1\u5831\u540D\u8AB2\u7A0B\u6D3B\u52D5\uFF0C\u4ED8\u6B3E\u5B8C\u6210\u5373\u5831\u540D\u6210\u529F\uFF0C\u8AB2\u524D\u5C07\u53E6\u767C\u9001mail\u901A\u77E5\uFF0C\u8AB2\u7A0B\u958B\u7ACB\u4E00\u822C\u6536\u64DA\u5C07\u7D71\u4E00\u7531\u8CA1\u52D9\u90E8\u9580\u5BC4\u767C\u3002"]}]}}},$={class:"container"},ee={class:"dropShadow -tw-mt-24 tw-mb-4 tw-text-white"},te={key:0,class:"shadow md:tw-grid tw-gap-8 tw-grid-cols-2 tw-bg-white tw-rounded-2xl tw-p-6 sm:tw-p-8"},se={class:"tw-relative tw-w-full tw-h-0",style:{"padding-bottom":"75%"}},oe=["src","alt"],ae={class:"tw-flex tw-flex-col tw-mt-2 md:tw-mt-0"},le={class:"tw-flex tw-justify-between tw-items-center"},ne=["innerHTML"],ie={class:"tw-my-4"},re={class:"text-second tw-text-2xl tw-font-bold tw-mr-3"},de={class:"tw-mt-auto tw-grid tw-grid-cols-2 tw-gap-4"},ce=["disabled"],ue=["disabled"],me={key:0,class:"container tw-mt-10 md:tw-pl-1"},we={class:"tw-flex tw-list-none tw-text-lg tw-font-bold"},fe=["innerHTML"],pe={key:1,class:"tw-mt-8"},be={class:"tw-font-bold tw-mt-4"},he=["src"];function _e(e,m,_,t,g,A){var u,d;const x=v("the-header"),p=v("router-link"),a=v("swiper-slide"),s=v("swiper"),n=v("font-awesome-icon"),i=v("n-tag"),r=v("n-input-number");return w(),b(I,null,[f(x),c("main",$,[c("div",ee,[f(p,{to:"/",class:"tw-font-bold"},{default:y(()=>[h("Home")]),_:1}),h(" / "),f(p,{to:"/products",class:"tw-font-bold"},{default:y(()=>[h("Product List")]),_:1}),h(" / "),c("span",null,S(t.product.title),1)]),t.noProduct?k("",!0):(w(),b("div",te,[c("div",null,[c("div",se,[((u=t.product.imagesUrl)==null?void 0:u.length)>0?(w(),V(s,{key:0,modules:t.modules,thumbs:{swiper:t.thumbsSwiper},allowTouchMove:((d=t.product.imagesUrl)==null?void 0:d.length)>1,class:"!tw-absolute tw-top-0 tw-w-full tw-h-full"},{default:y(()=>[(w(!0),b(I,null,N(t.product.imagesUrl,(o,l)=>(w(),V(a,{key:l,style:z({backgroundImage:"url("+o+")"})},null,8,["style"]))),128))]),_:1},8,["modules","thumbs","allowTouchMove"])):k("",!0)]),f(s,{allowTouchMove:!1,spaceBetween:8,slidesPerView:5,"watch-slides-progress":"",modules:t.modules,onSwiper:t.setThumbsSwiper,id:"thumbs",class:"tw-mt-2 tw-leading-none"},{default:y(()=>[(w(!0),b(I,null,N(t.product.imagesUrl,(o,l)=>(w(),V(a,{key:l},{default:y(()=>[c("img",{class:"tw-w-full tw-cursor-pointer",src:o,alt:l},null,8,oe)]),_:2},1024))),128))]),_:1},8,["modules","onSwiper"])]),c("div",ae,[c("h2",le,[h(S(t.product.title)+" ",1),f(n,{onClick:m[0]||(m[0]=o=>t.globalStore.toggleFav(t.product.id)),icon:[t.globalStore.isfav["meowforestFav"+t.product.id]?"fas":"far","heart"],class:"text-second tw-p-2 -tw-mr-2 tw-cursor-pointer"},null,8,["icon"])]),f(i,{bordered:!1,round:"",type:"success",class:"tw-self-start"},{default:y(()=>[h(S(t.product.category),1)]),_:1}),c("p",{class:"tw-mt-6",innerHTML:t.product.description},null,8,ne),c("p",ie,[c("span",re,"NTD. "+S(t.product.price),1),c("del",null,"NTD. "+S(t.product.origin_price),1)]),c("p",de,[f(r,{class:"tw-col-span-2",value:t.addNum,"onUpdate:value":m[1]||(m[1]=o=>t.addNum=o),min:1,size:"large","button-placement":"both"},null,8,["value"]),c("button",{disabled:t.loadingAdd,onClick:m[2]||(m[2]=o=>t.addCart(t.product.id)),class:"bg-second hover:tw-brightness-90 tw-rounded-full tw-text-white tw-font-bold tw-text-base tw-p-2.5 tw-border-0 tw-cursor-pointer"},[f(n,{icon:["fas","plus"]}),h(" \u52A0\u5165\u8CFC\u7269\u8ECA "),q(f(n,{class:"fa-spin",icon:["fas","spinner"]},null,512),[[L,t.loadingAdd]])],8,ce),c("button",{disabled:t.loadingAdd,onClick:m[3]||(m[3]=o=>t.buy(t.product.id)),class:"hover:tw-brightness-75 tw-bg-transparent tw-rounded-full tw-font-bold tw-text-base tw-p-2 tw-text-gray-400 tw-border tw-border-gray-300 tw-border-solid tw-cursor-pointer"},[f(n,{icon:["fas","dollar-sign"]}),h(" \u76F4\u63A5\u8CFC\u8CB7 "),q(f(n,{class:"fa-spin",icon:["fas","spinner"]},null,512),[[L,t.loadingAdd]])],8,ue)])])]))]),t.noProduct?k("",!0):(w(),b("section",me,[c("ul",we,[c("li",{onClick:m[4]||(m[4]=o=>t.tab="spec"),class:O([{active:t.tab==="spec"},"menuA tw-cursor-pointer tw-mr-8"])},"Product Spec",2),c("li",{onClick:m[5]||(m[5]=o=>t.tab="notice"),class:O([{active:t.tab==="notice"},"menuA tw-cursor-pointer"])},"Notice",2)]),t.tab==="spec"?(w(),b("div",{key:0,class:"tw-mt-8",innerHTML:t.product.content},null,8,fe)):k("",!0),t.tab==="notice"?(w(),b("div",pe,[(w(!0),b(I,null,N(t.notice,o=>(w(),b(I,{key:o.title},[c("p",be,[f(n,{icon:["fas","paw"],class:"tw-mr-2"}),h(S(o.title),1)]),(w(!0),b(I,null,N(o.content,l=>(w(),b("p",{key:l,class:"tw-ml-6"},S(l),1))),128))],64))),128))])):k("",!0)])),t.noProduct?(w(),b("img",{key:1,src:t.nodata,class:"tw-block tw-w-3/5 sm:tw-w-60 tw-h-auto tw-mx-auto tw-mt-32",alt:"no data"},null,8,he)):k("",!0),f(p,{to:"/products",class:"hover:tw-brightness-90 bg-third tw-rounded-full tw-block tw-font-bold tw-text-center tw-w-3/5 sm:tw-w-60 tw-p-4 tw-mt-10 tw-mx-auto"},{default:y(()=>[h(" Back To Product List ")]),_:1})],64)}const Ae=Q(Z,[["render",_e],["__scopeId","data-v-ca1b3dc1"]]);export{Ae as default};
