import{S as I}from"./ShopLayout.63793b00.js";import{N as P,a as T,y as U,r as D,o as F,c as b,d as l,e as r,j as p,w as y,F as g,g as v,f as o,i as x,t as c,l as V,k as j,au as L,p as A,m as E}from"./index.bcad466f.js";import{u as O}from"./global.81f10426.js";import{_ as $}from"./nodata.9b2f1321.js";import{_ as q}from"./_plugin-vue_export-helper.cdc0426e.js";import{N as z}from"./Spin.96b7291d.js";import{N as G}from"./InputNumber.9ddaa127.js";import"./TheHeader.5350655e.js";import"./use-compitable.23f9187d.js";import"./Input.6643cc35.js";import"./use-merged-state.788ee68d.js";const H={components:{ShopLayout:I,NSpin:z,NInputNumber:G,NModal:P},setup(){const u=T(),d=U("axios"),C=D(!1),t=O(),k=(h,i,a)=>{t.loading=!0;const S=`https://vue3-course-api.hexschool.io/api/daylily-api/cart/${i}`;d.put(S,{data:{product_id:a,qty:h}}).then(m=>{m&&(t.getCart(),window.$message.warning(m.data.message)),t.loading=!1}).catch(m=>{window.$message.error(m.toString()),t.loading=!1})},N=h=>{t.loading=!0;const i=`https://vue3-course-api.hexschool.io/api/daylily-api/cart/${h}`;d.delete(i).then(a=>{a&&(t.getCart(),window.$message.warning(a.data.message)),t.loading=!1}).catch(a=>{window.$message.error(a.toString()),t.loading=!1})};return F(()=>{t.getCart()}),{showModal:C,router:u,globalStore:t,updateCart:k,delCart:N,goNext(){t.payment===""?window.$message.warning("Plz choose payment method"):t.shipping===""?window.$message.warning("Plz choose shipping method"):u.push("/checkout")},enterCoupon(h){C.value=!1;const i="https://vue3-course-api.hexschool.io/api/daylily-api/coupon";d.post(i,{data:{code:h}}).then(a=>{a&&(t.getCart(),window.$message.warning(a.data.message))}).catch(a=>{window.$message.error(a.toString())})},coupons:[{title:"94\u611B\u8C93\u54AA",code:"94lovecat",discount:"All Product 10% OFF"},{title:"\u904E\u5E74\u7279\u60E0",code:"CNY",discount:"All Product 50% OFF"}],method:[{title:"Payment Method",name:"payment",option:[{id:"creditcard",txt:"Credit Card",info:"Visa\u3001MasterCard\u3001JCB\u7686\u53EF\u4F7F\u7528\u3002"},{id:"atm",txt:"ATM transfer",info:"\u6703\u63D0\u4F9B\u4E00\u7D44 ATM \u5C08\u7528\u4E4B\u865B\u64EC\u5E33\u865F\uFF0C\u5982\u4E09\u65E5\u5167\u672A\u6536\u5230\u6B3E\u9805\uFF0C\u8A02\u8CFC\u5C07\u6703\u81EA\u52D5\u53D6\u6D88\u3002"}]},{title:"Shipping Method",name:"shipping",option:[{id:"delivery",txt:"Home Delivery",info:"\u5B85\u914D\u904B\u8CBB NTD.80\uFF0C\u6EFF3,000\u514D\u904B"},{id:"pickup",txt:"Store pickup",info:"\u55B5\u68EE\u64DA\u9EDE\u81EA\u53D6\u514D\u904B\uFF0C\u64DA\u9EDE\u5730\u5740\uFF1A\u53F0\u5317\u5E02\u4E2D\u5C71\u5340\u5E78\u904B\u8DEF666\u865F"}]}]}}},_=u=>(A("data-v-d15d989e"),u=u(),E(),u),R=_(()=>o("div",{class:"tw-hidden md:tw-grid tw-bg-gray-200 tw-rounded-lg tw-py-2.5 tw-px-3 tw-grid-cols-12"},[o("span",{class:"tw-col-span-6"},"Product"),o("span",{class:"tw-col-span-2"},"Unit Price"),o("span",{class:"tw-col-span-2"},"Qty"),o("span",{class:"tw-col-span-2"},"Total")],-1)),J=_(()=>o("div",{class:"tw-block md:tw-hidden tw-bg-gray-200 tw-rounded-lg tw-py-1 tw-px-4"},"Shop List",-1)),Q=["onClick"],X=["src","alt"],Y={class:"tw-col-span-3 md:tw-col-span-2 tw-flex tw-justify-between"},K={class:"text-primary tw-font-bold"},W=_(()=>o("span",{class:"tw-mr-4 tw-block md:tw-hidden"},"X",-1)),Z={class:"tw-col-span-4 md:tw-col-span-2 tw-flex tw-justify-between"},tt=_(()=>o("span",{class:"tw-block md:tw-hidden"},"=",-1)),ot={class:"text-primary tw-font-bold"},et=["onClick"],st={class:"tw-text-xl tw-text-right tw-font-bold"},at={class:"tw-ml-4 text-primary"},nt={key:0},lt={key:1,class:"tw-opacity-50 tw-w-2/3 md:tw-w-72 tw-mx-auto tw-mt-16 tw-mb-6"},rt=_(()=>o("img",{src:$,class:"tw-w-full tw-h-auto",alt:"no data"},null,-1)),ct=[rt],dt={key:0,class:"bg-third tw-rounded-2xl tw-flex tw-flex-col md:tw-flex-row tw-gap-6 md:tw-gap-14 tw-p-6"},it={class:"tw-text-xl tw-font-bold tw-pb-4 tw-mb-4 tw-border-b tw-border-solid tw-border-white"},wt=_(()=>o("span",{class:"text-second"},"*",-1)),pt=["for"],ut={class:"tw-flex tw-flex-wrap tw-items-center"},ht=["onUpdate:modelValue","value","name","id"],_t=_(()=>o("i",{class:"tw-w-4 tw-h-4 tw-rounded-full tw-mr-2"},null,-1)),mt={class:"tw-font-semibold"},gt={class:"tw-ml-6 tw-mt-2 tw-mb-4 text-primary tw-flex-1"},ft=["onClick"],bt={class:"text-second tw-text-lg tw-font-bold"},xt={class:"text-primary tw-font-bold"},yt={class:"tw-p-2"};function vt(u,d,C,t,k,N){var M;const h=b("NInputNumber"),i=b("font-awesome-icon"),a=b("NSpin"),S=b("ShopLayout"),m=b("NModal");return l(),r(g,null,[p(S,{breadcrumb:"Shopping Cart",nextBtn:((M=t.globalStore.cart.carts)==null?void 0:M.length)>0?"Checkout":"Back To Home",onOnGoNext:d[1]||(d[1]=e=>{var n;return((n=t.globalStore.cart.carts)==null?void 0:n.length)>0?t.goNext():t.router.push("/")})},{content:y(()=>[p(a,{show:t.globalStore.loading,class:"tw-px-2"},{default:y(()=>{var e,n,w;return[((e=t.globalStore.cart.carts)==null?void 0:e.length)>0?(l(),r(g,{key:0},[R,J,(l(!0),r(g,null,v((n=t.globalStore.cart)==null?void 0:n.carts,(s,B)=>(l(),r("div",{key:B,class:"tw-relative tw-grid tw-grid-cols-12 tw-gap-y-4 tw-items-center tw-py-5 tw-border-b tw-border-solid tw-border-gray-200"},[o("a",{onClick:f=>t.router.push("/products/"+s.product.id),class:"tw-col-span-12 md:tw-col-span-6 tw-flex tw-items-center tw-cursor-pointer"},[o("img",{src:s.product.imagesUrl[0],alt:s.product.title,class:"tw-w-28 tw-mr-2"},null,8,X),x(" "+c(s.product.title),1)],8,Q),o("span",Y,[o("span",K,"$"+c(s.product.price),1),W]),p(h,{"onUpdate:value":[f=>t.updateCart(f,s.id,s.product.id),f=>s.qty=f],class:"tw-w-4/5 tw-col-span-5 md:tw-col-span-2 tw-mt-1 tw-text-center",value:s.qty,min:1,size:"small","button-placement":"both"},null,8,["onUpdate:value","value"]),o("span",Z,[tt,o("span",ot,"$"+c(s.total),1)]),o("p",{onClick:f=>t.delCart(s.id),class:"tw-absolute tw-right-0 tw-top-8 md:tw-top-1/2 -tw-translate-y-1/2 tw-p-2 tw-cursor-pointer"},[p(i,{icon:["far","trash-can"]})],8,et)]))),128)),o("a",{class:"text-second tw-font-bold tw-block tw-pt-6 tw-pb-2 tw-cursor-pointer",onClick:d[0]||(d[0]=s=>t.showModal=!0)},[x(" Enter Coupon Code "),p(i,{icon:["fas","caret-right"]})]),o("div",st,[x(" Subtotal "),o("span",at,[x("NTD. "+c(t.globalStore.cart.total)+" ",1),(w=t.globalStore.cart.carts[0])!=null&&w.coupon?(l(),r("small",nt,"(-"+c(t.globalStore.cart.total-Math.ceil(t.globalStore.cart.final_total))+")",1)):V("",!0)])])],64)):(l(),r("div",lt,ct))]}),_:1},8,["show"])]),order:y(()=>{var e;return[((e=t.globalStore.cart.carts)==null?void 0:e.length)>0?(l(),r("section",dt,[(l(!0),r(g,null,v(t.method,n=>(l(),r("div",{key:n.title,class:"tw-flex-1"},[o("p",it,[x(c(n.title)+" ",1),wt]),(l(!0),r(g,null,v(n.option,w=>(l(),r("label",{key:w.id,for:w.id,class:"tw-cursor-pointer"},[o("div",ut,[j(o("input",{"onUpdate:modelValue":s=>t.globalStore[n.name]=s,value:w.id,name:n.name,type:"radio",id:w.id,class:"tw-hidden"},null,8,ht),[[L,t.globalStore[n.name]]]),_t,o("span",mt,c(w.txt),1)]),o("p",gt,c(w.info),1)],8,pt))),128))]))),128))])):V("",!0)]}),_:1},8,["nextBtn"]),p(m,{show:t.showModal,"onUpdate:show":d[2]||(d[2]=e=>t.showModal=e),"block-scroll":!1,title:"Enter Coupon",preset:"card",style:{"max-width":"95%",width:"360px"}},{default:y(()=>[(l(!0),r(g,null,v(t.coupons,e=>(l(),r("div",{onClick:n=>t.enterCoupon(e.code),key:e.code,class:"tw-relative tw-flex tw-justify-between tw-items-center tw-border-b tw-border-dashed tw-border-gray-400 tw-mb-4 tw-px-3 tw-pb-4 tw-cursor-pointer"},[o("div",null,[o("p",bt,c(e.title),1),o("p",xt,"CODE : "+c(e.code),1),o("span",null,c(e.discount),1)]),o("p",yt,[p(i,{icon:["far","hand-pointer"],class:"text-theme fa-xl fa-beat"})]),p(i,{icon:["fas","scissors"],class:"tw-absolute tw-text-gray-300 tw-left-20 -tw-bottom-2 fa-lg"})],8,ft))),128))]),_:1},8,["show"])],64)}const Dt=q(H,[["render",vt],["__scopeId","data-v-d15d989e"]]);export{Dt as default};
